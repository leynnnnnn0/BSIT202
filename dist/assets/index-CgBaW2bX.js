(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function oa(e,t){const n=new Set(e.split(","));return r=>n.has(r)}const it={},In=[],Xt=()=>{},qd=()=>!1,ri=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),aa=e=>e.startsWith("onUpdate:"),bt=Object.assign,la=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Hd=Object.prototype.hasOwnProperty,X=(e,t)=>Hd.call(e,t),F=Array.isArray,wn=e=>si(e)==="[object Map]",pu=e=>si(e)==="[object Set]",H=e=>typeof e=="function",_t=e=>typeof e=="string",hn=e=>typeof e=="symbol",ut=e=>e!==null&&typeof e=="object",gu=e=>(ut(e)||H(e))&&H(e.then)&&H(e.catch),mu=Object.prototype.toString,si=e=>mu.call(e),zd=e=>si(e).slice(8,-1),_u=e=>si(e)==="[object Object]",ca=e=>_t(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ar=oa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ii=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Kd=/-(\w)/g,bn=ii(e=>e.replace(Kd,(t,n)=>n?n.toUpperCase():"")),Gd=/\B([A-Z])/g,Un=ii(e=>e.replace(Gd,"-$1").toLowerCase()),yu=ii(e=>e.charAt(0).toUpperCase()+e.slice(1)),zi=ii(e=>e?`on${yu(e)}`:""),Ue=(e,t)=>!Object.is(e,t),Is=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Eu=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},_o=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Cl;const vu=()=>Cl||(Cl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ua(e){if(F(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=_t(r)?Yd(r):ua(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(_t(e)||ut(e))return e}const Wd=/;(?![^(]*\))/g,Qd=/:([^]+)/,Xd=/\/\*[^]*?\*\//g;function Yd(e){const t={};return e.replace(Xd,"").split(Wd).forEach(n=>{if(n){const r=n.split(Qd);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ha(e){let t="";if(_t(e))t=e;else if(F(e))for(let n=0;n<e.length;n++){const r=ha(e[n]);r&&(t+=r+" ")}else if(ut(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Jd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zd=oa(Jd);function Tu(e){return!!e||e===""}const bl=e=>_t(e)?e:e==null?"":F(e)||ut(e)&&(e.toString===mu||!H(e.toString))?JSON.stringify(e,Iu,2):String(e),Iu=(e,t)=>t&&t.__v_isRef?Iu(e,t.value):wn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Ki(r,i)+" =>"]=s,n),{})}:pu(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ki(n))}:hn(t)?Ki(t):ut(t)&&!F(t)&&!_u(t)?String(t):t,Ki=(e,t="")=>{var n;return hn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zt;class tp{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Zt,!t&&Zt&&(this.index=(Zt.scopes||(Zt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Zt;try{return Zt=this,t()}finally{Zt=n}}}on(){Zt=this}off(){Zt=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function ep(e,t=Zt){t&&t.active&&t.effects.push(e)}function np(){return Zt}let rn;class fa{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,ep(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,qe();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(rp(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),He()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Ne,n=rn;try{return Ne=!0,rn=this,this._runnings++,Vl(this),this.fn()}finally{Dl(this),this._runnings--,rn=n,Ne=t}}stop(){this.active&&(Vl(this),Dl(this),this.onStop&&this.onStop(),this.active=!1)}}function rp(e){return e.value}function Vl(e){e._trackId++,e._depsLength=0}function Dl(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)wu(e.deps[t],e);e.deps.length=e._depsLength}}function wu(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let Ne=!0,yo=0;const Au=[];function qe(){Au.push(Ne),Ne=!1}function He(){const e=Au.pop();Ne=e===void 0?!0:e}function da(){yo++}function pa(){for(yo--;!yo&&Eo.length;)Eo.shift()()}function Ru(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&wu(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Eo=[];function Su(e,t,n){da();for(const r of e.keys()){let s;r._dirtyLevel<t&&(s??(s=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(s??(s=e.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Eo.push(r.scheduler)))}pa()}const Pu=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},vo=new WeakMap,sn=Symbol(""),To=Symbol("");function qt(e,t,n){if(Ne&&rn){let r=vo.get(e);r||vo.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=Pu(()=>r.delete(n))),Ru(rn,s)}}function Ie(e,t,n,r,s,i){const o=vo.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&F(e)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!hn(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":F(e)?ca(n)&&a.push(o.get("length")):(a.push(o.get(sn)),wn(e)&&a.push(o.get(To)));break;case"delete":F(e)||(a.push(o.get(sn)),wn(e)&&a.push(o.get(To)));break;case"set":wn(e)&&a.push(o.get(sn));break}da();for(const l of a)l&&Su(l,4);pa()}const sp=oa("__proto__,__v_isRef,__isVue"),Cu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(hn)),xl=ip();function ip(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Z(this);for(let i=0,o=this.length;i<o;i++)qt(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(Z)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){qe(),da();const r=Z(this)[t].apply(this,n);return pa(),He(),r}}),e}function op(e){hn(e)||(e=String(e));const t=Z(this);return qt(t,"has",e),t.hasOwnProperty(e)}class bu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Ep:Nu:i?xu:Du).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=F(t);if(!s){if(o&&X(xl,n))return Reflect.get(xl,n,r);if(n==="hasOwnProperty")return op}const a=Reflect.get(t,n,r);return(hn(n)?Cu.has(n):sp(n))||(s||qt(t,"get",n),i)?a:Ht(a)?o&&ca(n)?a:a.value:ut(a)?s?Ou(a):_a(a):a}}class Vu extends bu{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const l=Er(i);if(!Ns(r)&&!Er(r)&&(i=Z(i),r=Z(r)),!F(t)&&Ht(i)&&!Ht(r))return l?!1:(i.value=r,!0)}const o=F(t)&&ca(n)?Number(n)<t.length:X(t,n),a=Reflect.set(t,n,r,s);return t===Z(s)&&(o?Ue(r,i)&&Ie(t,"set",n,r):Ie(t,"add",n,r)),a}deleteProperty(t,n){const r=X(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Ie(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!hn(n)||!Cu.has(n))&&qt(t,"has",n),r}ownKeys(t){return qt(t,"iterate",F(t)?"length":sn),Reflect.ownKeys(t)}}class ap extends bu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const lp=new Vu,cp=new ap,up=new Vu(!0);const ga=e=>e,oi=e=>Reflect.getPrototypeOf(e);function as(e,t,n=!1,r=!1){e=e.__v_raw;const s=Z(e),i=Z(t);n||(Ue(t,i)&&qt(s,"get",t),qt(s,"get",i));const{has:o}=oi(s),a=r?ga:n?Ea:vr;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function ls(e,t=!1){const n=this.__v_raw,r=Z(n),s=Z(e);return t||(Ue(e,s)&&qt(r,"has",e),qt(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function cs(e,t=!1){return e=e.__v_raw,!t&&qt(Z(e),"iterate",sn),Reflect.get(e,"size",e)}function Nl(e){e=Z(e);const t=Z(this);return oi(t).has.call(t,e)||(t.add(e),Ie(t,"add",e,e)),this}function Ol(e,t){t=Z(t);const n=Z(this),{has:r,get:s}=oi(n);let i=r.call(n,e);i||(e=Z(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?Ue(t,o)&&Ie(n,"set",e,t):Ie(n,"add",e,t),this}function Ml(e){const t=Z(this),{has:n,get:r}=oi(t);let s=n.call(t,e);s||(e=Z(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Ie(t,"delete",e,void 0),i}function kl(){const e=Z(this),t=e.size!==0,n=e.clear();return t&&Ie(e,"clear",void 0,void 0),n}function us(e,t){return function(r,s){const i=this,o=i.__v_raw,a=Z(o),l=t?ga:e?Ea:vr;return!e&&qt(a,"iterate",sn),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function hs(e,t,n){return function(...r){const s=this.__v_raw,i=Z(s),o=wn(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...r),u=n?ga:t?Ea:vr;return!t&&qt(i,"iterate",l?To:sn),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Ce(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function hp(){const e={get(i){return as(this,i)},get size(){return cs(this)},has:ls,add:Nl,set:Ol,delete:Ml,clear:kl,forEach:us(!1,!1)},t={get(i){return as(this,i,!1,!0)},get size(){return cs(this)},has:ls,add:Nl,set:Ol,delete:Ml,clear:kl,forEach:us(!1,!0)},n={get(i){return as(this,i,!0)},get size(){return cs(this,!0)},has(i){return ls.call(this,i,!0)},add:Ce("add"),set:Ce("set"),delete:Ce("delete"),clear:Ce("clear"),forEach:us(!0,!1)},r={get(i){return as(this,i,!0,!0)},get size(){return cs(this,!0)},has(i){return ls.call(this,i,!0)},add:Ce("add"),set:Ce("set"),delete:Ce("delete"),clear:Ce("clear"),forEach:us(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=hs(i,!1,!1),n[i]=hs(i,!0,!1),t[i]=hs(i,!1,!0),r[i]=hs(i,!0,!0)}),[e,n,t,r]}const[fp,dp,pp,gp]=hp();function ma(e,t){const n=t?e?gp:pp:e?dp:fp;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(X(n,s)&&s in r?n:r,s,i)}const mp={get:ma(!1,!1)},_p={get:ma(!1,!0)},yp={get:ma(!0,!1)};const Du=new WeakMap,xu=new WeakMap,Nu=new WeakMap,Ep=new WeakMap;function vp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Tp(e){return e.__v_skip||!Object.isExtensible(e)?0:vp(zd(e))}function _a(e){return Er(e)?e:ya(e,!1,lp,mp,Du)}function Ip(e){return ya(e,!1,up,_p,xu)}function Ou(e){return ya(e,!0,cp,yp,Nu)}function ya(e,t,n,r,s){if(!ut(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=Tp(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function lr(e){return Er(e)?lr(e.__v_raw):!!(e&&e.__v_isReactive)}function Er(e){return!!(e&&e.__v_isReadonly)}function Ns(e){return!!(e&&e.__v_isShallow)}function Mu(e){return e?!!e.__v_raw:!1}function Z(e){const t=e&&e.__v_raw;return t?Z(t):e}function wp(e){return Object.isExtensible(e)&&Eu(e,"__v_skip",!0),e}const vr=e=>ut(e)?_a(e):e,Ea=e=>ut(e)?Ou(e):e;class ku{constructor(t,n,r,s){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new fa(()=>t(this._value),()=>ws(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=Z(this);return(!t._cacheable||t.effect.dirty)&&Ue(t._value,t._value=t.effect.run())&&ws(t,4),Lu(t),t.effect._dirtyLevel>=2&&ws(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Ap(e,t,n=!1){let r,s;const i=H(e);return i?(r=e,s=Xt):(r=e.get,s=e.set),new ku(r,s,i||!s,n)}function Lu(e){var t;Ne&&rn&&(e=Z(e),Ru(rn,(t=e.dep)!=null?t:e.dep=Pu(()=>e.dep=void 0,e instanceof ku?e:void 0)))}function ws(e,t=4,n){e=Z(e);const r=e.dep;r&&Su(r,t)}function Ht(e){return!!(e&&e.__v_isRef===!0)}function Os(e){return Rp(e,!1)}function Rp(e,t){return Ht(e)?e:new Sp(e,t)}class Sp{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Z(t),this._value=n?t:vr(t)}get value(){return Lu(this),this._value}set value(t){const n=this.__v_isShallow||Ns(t)||Er(t);t=n?t:Z(t),Ue(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:vr(t),ws(this,4))}}function Pp(e){return Ht(e)?e.value:e}const Cp={get:(e,t,n)=>Pp(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Ht(s)&&!Ht(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Fu(e){return lr(e)?e:new Proxy(e,Cp)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Oe(e,t,n,r){try{return r?e(...r):e()}catch(s){ai(s,t,n)}}function re(e,t,n,r){if(H(e)){const s=Oe(e,t,n,r);return s&&gu(s)&&s.catch(i=>{ai(i,t,n)}),s}if(F(e)){const s=[];for(let i=0;i<e.length;i++)s.push(re(e[i],t,n,r));return s}}function ai(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){qe(),Oe(l,null,10,[e,o,a]),He();return}}bp(e,n,s,r)}function bp(e,t,n,r=!0){console.error(e)}let Tr=!1,Io=!1;const Nt=[];let he=0;const An=[];let be=null,Je=0;const Uu=Promise.resolve();let va=null;function Vp(e){const t=va||Uu;return e?t.then(this?e.bind(this):e):t}function Dp(e){let t=he+1,n=Nt.length;for(;t<n;){const r=t+n>>>1,s=Nt[r],i=Ir(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function Ta(e){(!Nt.length||!Nt.includes(e,Tr&&e.allowRecurse?he+1:he))&&(e.id==null?Nt.push(e):Nt.splice(Dp(e.id),0,e),Bu())}function Bu(){!Tr&&!Io&&(Io=!0,va=Uu.then($u))}function xp(e){const t=Nt.indexOf(e);t>he&&Nt.splice(t,1)}function Np(e){F(e)?An.push(...e):(!be||!be.includes(e,e.allowRecurse?Je+1:Je))&&An.push(e),Bu()}function Ll(e,t,n=Tr?he+1:0){for(;n<Nt.length;n++){const r=Nt[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Nt.splice(n,1),n--,r()}}}function ju(e){if(An.length){const t=[...new Set(An)].sort((n,r)=>Ir(n)-Ir(r));if(An.length=0,be){be.push(...t);return}for(be=t,Je=0;Je<be.length;Je++)be[Je]();be=null,Je=0}}const Ir=e=>e.id==null?1/0:e.id,Op=(e,t)=>{const n=Ir(e)-Ir(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function $u(e){Io=!1,Tr=!0,Nt.sort(Op);try{for(he=0;he<Nt.length;he++){const t=Nt[he];t&&t.active!==!1&&Oe(t,null,14)}}finally{he=0,Nt.length=0,ju(),Tr=!1,va=null,(Nt.length||An.length)&&$u()}}function Mp(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||it;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:p}=r[u]||it;p&&(s=n.map(g=>_t(g)?g.trim():g)),f&&(s=n.map(_o))}let a,l=r[a=zi(t)]||r[a=zi(bn(t))];!l&&i&&(l=r[a=zi(Un(t))]),l&&re(l,e,6,s);const c=r[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,re(c,e,6,s)}}function qu(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!H(e)){const l=c=>{const u=qu(c,t,!0);u&&(a=!0,bt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(ut(e)&&r.set(e,null),null):(F(i)?i.forEach(l=>o[l]=null):bt(o,i),ut(e)&&r.set(e,o),o)}function li(e,t){return!e||!ri(t)?!1:(t=t.slice(2).replace(/Once$/,""),X(e,t[0].toLowerCase()+t.slice(1))||X(e,Un(t))||X(e,t))}let Kt=null,ci=null;function Ms(e){const t=Kt;return Kt=e,ci=e&&e.type.__scopeId||null,t}function kp(e){ci=e}function Lp(){ci=null}function Fp(e,t=Kt,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Gl(-1);const i=Ms(t);let o;try{o=e(...s)}finally{Ms(i),r._d&&Gl(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Gi(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:p,setupState:g,ctx:D,inheritAttrs:P}=e,V=Ms(e);let $,W;try{if(n.shapeFlag&4){const et=s||r,It=et;$=ue(c.call(It,et,u,f,g,p,D)),W=a}else{const et=t;$=ue(et.length>1?et(f,{attrs:a,slots:o,emit:l}):et(f,null)),W=t.props?a:Up(a)}}catch(et){hr.length=0,ai(et,e,1),$=ge(wr)}let q=$;if(W&&P!==!1){const et=Object.keys(W),{shapeFlag:It}=q;et.length&&It&7&&(i&&et.some(aa)&&(W=Bp(W,i)),q=Vn(q,W,!1,!0))}return n.dirs&&(q=Vn(q,null,!1,!0),q.dirs=q.dirs?q.dirs.concat(n.dirs):n.dirs),n.transition&&(q.transition=n.transition),$=q,Ms(V),$}const Up=e=>{let t;for(const n in e)(n==="class"||n==="style"||ri(n))&&((t||(t={}))[n]=e[n]);return t},Bp=(e,t)=>{const n={};for(const r in e)(!aa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function jp(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Fl(r,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==r[p]&&!li(c,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Fl(r,o,c):!0:!!o;return!1}function Fl(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!li(n,i))return!0}return!1}function $p({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const qp=Symbol.for("v-ndc"),Hp=e=>e.__isSuspense;function zp(e,t){t&&t.pendingBranch?F(e)?t.effects.push(...e):t.effects.push(e):Np(e)}const Kp=Symbol.for("v-scx"),Gp=()=>Rs(Kp),fs={};function Wi(e,t,n){return Hu(e,t,n)}function Hu(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=it){if(t&&i){const z=t;t=(...jt)=>{z(...jt),It()}}const l=Ut,c=z=>r===!0?z:Ze(z,r===!1?1:void 0);let u,f=!1,p=!1;if(Ht(e)?(u=()=>e.value,f=Ns(e)):lr(e)?(u=()=>c(e),f=!0):F(e)?(p=!0,f=e.some(z=>lr(z)||Ns(z)),u=()=>e.map(z=>{if(Ht(z))return z.value;if(lr(z))return c(z);if(H(z))return Oe(z,l,2)})):H(e)?t?u=()=>Oe(e,l,2):u=()=>(g&&g(),re(e,l,3,[D])):u=Xt,t&&r){const z=u;u=()=>Ze(z())}let g,D=z=>{g=q.onStop=()=>{Oe(z,l,4),g=q.onStop=void 0}},P;if(fi)if(D=Xt,t?n&&re(t,l,3,[u(),p?[]:void 0,D]):u(),s==="sync"){const z=Gp();P=z.__watcherHandles||(z.__watcherHandles=[])}else return Xt;let V=p?new Array(e.length).fill(fs):fs;const $=()=>{if(!(!q.active||!q.dirty))if(t){const z=q.run();(r||f||(p?z.some((jt,Yt)=>Ue(jt,V[Yt])):Ue(z,V)))&&(g&&g(),re(t,l,3,[z,V===fs?void 0:p&&V[0]===fs?[]:V,D]),V=z)}else q.run()};$.allowRecurse=!!t;let W;s==="sync"?W=$:s==="post"?W=()=>$t($,l&&l.suspense):($.pre=!0,l&&($.id=l.uid),W=()=>Ta($));const q=new fa(u,Xt,W),et=np(),It=()=>{q.stop(),et&&la(et.effects,q)};return t?n?$():V=q.run():s==="post"?$t(q.run.bind(q),l&&l.suspense):q.run(),P&&P.push(It),It}function Wp(e,t,n){const r=this.proxy,s=_t(e)?e.includes(".")?zu(r,e):()=>r[e]:e.bind(r,r);let i;H(t)?i=t:(i=t.handler,n=t);const o=$r(this),a=Hu(s,i.bind(r),n);return o(),a}function zu(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Ze(e,t=1/0,n){if(t<=0||!ut(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ht(e))Ze(e.value,t,n);else if(F(e))for(let r=0;r<e.length;r++)Ze(e[r],t,n);else if(pu(e)||wn(e))e.forEach(r=>{Ze(r,t,n)});else if(_u(e))for(const r in e)Ze(e[r],t,n);return e}function wo(e,t){if(Kt===null)return e;const n=di(Kt)||Kt.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,l=it]=t[s];i&&(H(i)&&(i={mounted:i,updated:i}),i.deep&&Ze(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Qe(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(qe(),re(l,n,8,[e.el,a,e,t]),He())}}const As=e=>!!e.type.__asyncLoader,Ku=e=>e.type.__isKeepAlive;function Qp(e,t){Gu(e,"a",t)}function Xp(e,t){Gu(e,"da",t)}function Gu(e,t,n=Ut){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(ui(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Ku(s.parent.vnode)&&Yp(r,t,n,s),s=s.parent}}function Yp(e,t,n,r){const s=ui(t,e,r,!0);Qu(()=>{la(r[t],s)},n)}function ui(e,t,n=Ut,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;qe();const a=$r(n),l=re(t,n,e,o);return a(),He(),l});return r?s.unshift(i):s.push(i),i}}const Pe=e=>(t,n=Ut)=>(!fi||e==="sp")&&ui(e,(...r)=>t(...r),n),Jp=Pe("bm"),Wu=Pe("m"),Zp=Pe("bu"),tg=Pe("u"),eg=Pe("bum"),Qu=Pe("um"),ng=Pe("sp"),rg=Pe("rtg"),sg=Pe("rtc");function ig(e,t=Ut){ui("ec",e,t)}function og(e,t,n,r){let s;const i=n;if(F(e)||_t(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i)}else if(ut(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(e[c],c,a,i)}}else s=[];return s}const Ao=e=>e?ch(e)?di(e)||e.proxy:Ao(e.parent):null,cr=bt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ao(e.parent),$root:e=>Ao(e.root),$emit:e=>e.emit,$options:e=>Ia(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Ta(e.update)}),$nextTick:e=>e.n||(e.n=Vp.bind(e.proxy)),$watch:e=>Wp.bind(e)}),Qi=(e,t)=>e!==it&&!e.__isScriptSetup&&X(e,t),ag={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Qi(r,t))return o[t]=1,r[t];if(s!==it&&X(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&X(c,t))return o[t]=3,i[t];if(n!==it&&X(n,t))return o[t]=4,n[t];Ro&&(o[t]=0)}}const u=cr[t];let f,p;if(u)return t==="$attrs"&&qt(e.attrs,"get",""),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==it&&X(n,t))return o[t]=4,n[t];if(p=l.config.globalProperties,X(p,t))return p[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Qi(s,t)?(s[t]=n,!0):r!==it&&X(r,t)?(r[t]=n,!0):X(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==it&&X(e,o)||Qi(t,o)||(a=i[0])&&X(a,o)||X(r,o)||X(cr,o)||X(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:X(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ul(e){return F(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Ro=!0;function lg(e){const t=Ia(e),n=e.proxy,r=e.ctx;Ro=!1,t.beforeCreate&&Bl(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:p,beforeUpdate:g,updated:D,activated:P,deactivated:V,beforeDestroy:$,beforeUnmount:W,destroyed:q,unmounted:et,render:It,renderTracked:z,renderTriggered:jt,errorCaptured:Yt,serverPrefetch:Gn,expose:oe,inheritAttrs:Wn,components:rs,directives:ss,filters:qi}=t;if(c&&cg(c,r,null),o)for(const ct in o){const rt=o[ct];H(rt)&&(r[ct]=rt.bind(n))}if(s){const ct=s.call(n,n);ut(ct)&&(e.data=_a(ct))}if(Ro=!0,i)for(const ct in i){const rt=i[ct],Ge=H(rt)?rt.bind(n,n):H(rt.get)?rt.get.bind(n,n):Xt,is=!H(rt)&&H(rt.set)?rt.set.bind(n):Xt,We=$g({get:Ge,set:is});Object.defineProperty(r,ct,{enumerable:!0,configurable:!0,get:()=>We.value,set:ae=>We.value=ae})}if(a)for(const ct in a)Xu(a[ct],r,n,ct);if(l){const ct=H(l)?l.call(n):l;Reflect.ownKeys(ct).forEach(rt=>{gg(rt,ct[rt])})}u&&Bl(u,e,"c");function Lt(ct,rt){F(rt)?rt.forEach(Ge=>ct(Ge.bind(n))):rt&&ct(rt.bind(n))}if(Lt(Jp,f),Lt(Wu,p),Lt(Zp,g),Lt(tg,D),Lt(Qp,P),Lt(Xp,V),Lt(ig,Yt),Lt(sg,z),Lt(rg,jt),Lt(eg,W),Lt(Qu,et),Lt(ng,Gn),F(oe))if(oe.length){const ct=e.exposed||(e.exposed={});oe.forEach(rt=>{Object.defineProperty(ct,rt,{get:()=>n[rt],set:Ge=>n[rt]=Ge})})}else e.exposed||(e.exposed={});It&&e.render===Xt&&(e.render=It),Wn!=null&&(e.inheritAttrs=Wn),rs&&(e.components=rs),ss&&(e.directives=ss)}function cg(e,t,n=Xt){F(e)&&(e=So(e));for(const r in e){const s=e[r];let i;ut(s)?"default"in s?i=Rs(s.from||r,s.default,!0):i=Rs(s.from||r):i=Rs(s),Ht(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function Bl(e,t,n){re(F(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Xu(e,t,n,r){const s=r.includes(".")?zu(n,r):()=>n[r];if(_t(e)){const i=t[e];H(i)&&Wi(s,i)}else if(H(e))Wi(s,e.bind(n));else if(ut(e))if(F(e))e.forEach(i=>Xu(i,t,n,r));else{const i=H(e.handler)?e.handler.bind(n):t[e.handler];H(i)&&Wi(s,i,e)}}function Ia(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!s.length&&!n&&!r?l=t:(l={},s.length&&s.forEach(c=>ks(l,c,o,!0)),ks(l,t,o)),ut(t)&&i.set(t,l),l}function ks(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&ks(e,i,n,!0),s&&s.forEach(o=>ks(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=ug[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const ug={data:jl,props:$l,emits:$l,methods:nr,computed:nr,beforeCreate:Ft,created:Ft,beforeMount:Ft,mounted:Ft,beforeUpdate:Ft,updated:Ft,beforeDestroy:Ft,beforeUnmount:Ft,destroyed:Ft,unmounted:Ft,activated:Ft,deactivated:Ft,errorCaptured:Ft,serverPrefetch:Ft,components:nr,directives:nr,watch:fg,provide:jl,inject:hg};function jl(e,t){return t?e?function(){return bt(H(e)?e.call(this,this):e,H(t)?t.call(this,this):t)}:t:e}function hg(e,t){return nr(So(e),So(t))}function So(e){if(F(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ft(e,t){return e?[...new Set([].concat(e,t))]:t}function nr(e,t){return e?bt(Object.create(null),e,t):t}function $l(e,t){return e?F(e)&&F(t)?[...new Set([...e,...t])]:bt(Object.create(null),Ul(e),Ul(t??{})):t}function fg(e,t){if(!e)return t;if(!t)return e;const n=bt(Object.create(null),e);for(const r in t)n[r]=Ft(e[r],t[r]);return n}function Yu(){return{app:null,config:{isNativeTag:qd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let dg=0;function pg(e,t){return function(r,s=null){H(r)||(r=bt({},r)),s!=null&&!ut(s)&&(s=null);const i=Yu(),o=new WeakSet;let a=!1;const l=i.app={_uid:dg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:qg,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&H(c.install)?(o.add(c),c.install(l,...u)):H(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,f){if(!a){const p=ge(r,s);return p.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),u&&t?t(p,c):e(p,c,f),a=!0,l._container=c,c.__vue_app__=l,di(p.component)||p.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){const u=ur;ur=l;try{return c()}finally{ur=u}}};return l}}let ur=null;function gg(e,t){if(Ut){let n=Ut.provides;const r=Ut.parent&&Ut.parent.provides;r===n&&(n=Ut.provides=Object.create(r)),n[e]=t}}function Rs(e,t,n=!1){const r=Ut||Kt;if(r||ur){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:ur._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&H(t)?t.call(r&&r.proxy):t}}const Ju={},Zu=()=>Object.create(Ju),th=e=>Object.getPrototypeOf(e)===Ju;function mg(e,t,n,r=!1){const s={},i=Zu();e.propsDefaults=Object.create(null),eh(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:Ip(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function _g(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=Z(s),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(li(e.emitsOptions,p))continue;const g=t[p];if(l)if(X(i,p))g!==i[p]&&(i[p]=g,c=!0);else{const D=bn(p);s[D]=Po(l,a,D,g,e,!1)}else g!==i[p]&&(i[p]=g,c=!0)}}}else{eh(e,t,s,i)&&(c=!0);let u;for(const f in a)(!t||!X(t,f)&&((u=Un(f))===f||!X(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(s[f]=Po(l,a,f,void 0,e,!0)):delete s[f]);if(i!==a)for(const f in i)(!t||!X(t,f))&&(delete i[f],c=!0)}c&&Ie(e.attrs,"set","")}function eh(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(ar(l))continue;const c=t[l];let u;s&&X(s,u=bn(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:li(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=Z(n),c=a||it;for(let u=0;u<i.length;u++){const f=i[u];n[f]=Po(s,l,f,c[f],e,!X(c,f))}}return o}function Po(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=X(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&H(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=$r(s);r=c[n]=l.call(null,t),u()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Un(n))&&(r=!0))}return r}function nh(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let l=!1;if(!H(e)){const u=f=>{l=!0;const[p,g]=nh(f,t,!0);bt(o,p),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!l)return ut(e)&&r.set(e,In),In;if(F(i))for(let u=0;u<i.length;u++){const f=bn(i[u]);ql(f)&&(o[f]=it)}else if(i)for(const u in i){const f=bn(u);if(ql(f)){const p=i[u],g=o[f]=F(p)||H(p)?{type:p}:bt({},p);if(g){const D=Kl(Boolean,g.type),P=Kl(String,g.type);g[0]=D>-1,g[1]=P<0||D<P,(D>-1||X(g,"default"))&&a.push(f)}}}const c=[o,a];return ut(e)&&r.set(e,c),c}function ql(e){return e[0]!=="$"&&!ar(e)}function Hl(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function zl(e,t){return Hl(e)===Hl(t)}function Kl(e,t){return F(t)?t.findIndex(n=>zl(n,e)):H(t)&&zl(t,e)?0:-1}const rh=e=>e[0]==="_"||e==="$stable",wa=e=>F(e)?e.map(ue):[ue(e)],yg=(e,t,n)=>{if(t._n)return t;const r=Fp((...s)=>wa(t(...s)),n);return r._c=!1,r},sh=(e,t,n)=>{const r=e._ctx;for(const s in e){if(rh(s))continue;const i=e[s];if(H(i))t[s]=yg(s,i,r);else if(i!=null){const o=wa(i);t[s]=()=>o}}},ih=(e,t)=>{const n=wa(t);e.slots.default=()=>n},Eg=(e,t)=>{const n=e.slots=Zu();if(e.vnode.shapeFlag&32){const r=t._;r?(bt(n,t),Eu(n,"_",r,!0)):sh(t,n)}else t&&ih(e,t)},vg=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=it;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(bt(s,t),!n&&a===1&&delete s._):(i=!t.$stable,sh(t,s)),o=t}else t&&(ih(e,t),o={default:1});if(i)for(const a in s)!rh(a)&&o[a]==null&&delete s[a]};function Co(e,t,n,r,s=!1){if(F(e)){e.forEach((p,g)=>Co(p,t&&(F(t)?t[g]:t),n,r,s));return}if(As(r)&&!s)return;const i=r.shapeFlag&4?di(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=e,c=t&&t.r,u=a.refs===it?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(_t(c)?(u[c]=null,X(f,c)&&(f[c]=null)):Ht(c)&&(c.value=null)),H(l))Oe(l,a,12,[o,u]);else{const p=_t(l),g=Ht(l);if(p||g){const D=()=>{if(e.f){const P=p?X(f,l)?f[l]:u[l]:l.value;s?F(P)&&la(P,i):F(P)?P.includes(i)||P.push(i):p?(u[l]=[i],X(f,l)&&(f[l]=u[l])):(l.value=[i],e.k&&(u[e.k]=l.value))}else p?(u[l]=o,X(f,l)&&(f[l]=o)):g&&(l.value=o,e.k&&(u[e.k]=o))};o?(D.id=-1,$t(D,n)):D()}}}const $t=zp;function Tg(e){return Ig(e)}function Ig(e,t){const n=vu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:p,setScopeId:g=Xt,insertStaticContent:D}=e,P=(h,d,m,_=null,y=null,w=null,S=void 0,I=null,A=!!d.dynamicChildren)=>{if(h===d)return;h&&!Yn(h,d)&&(_=os(h),ae(h,y,w,!0),h=null),d.patchFlag===-2&&(A=!1,d.dynamicChildren=null);const{type:T,ref:C,shapeFlag:M}=d;switch(T){case hi:V(h,d,m,_);break;case wr:$(h,d,m,_);break;case Ss:h==null&&W(d,m,_,S);break;case te:rs(h,d,m,_,y,w,S,I,A);break;default:M&1?It(h,d,m,_,y,w,S,I,A):M&6?ss(h,d,m,_,y,w,S,I,A):(M&64||M&128)&&T.process(h,d,m,_,y,w,S,I,A,Qn)}C!=null&&y&&Co(C,h&&h.ref,w,d||h,!d)},V=(h,d,m,_)=>{if(h==null)r(d.el=a(d.children),m,_);else{const y=d.el=h.el;d.children!==h.children&&c(y,d.children)}},$=(h,d,m,_)=>{h==null?r(d.el=l(d.children||""),m,_):d.el=h.el},W=(h,d,m,_)=>{[h.el,h.anchor]=D(h.children,d,m,_,h.el,h.anchor)},q=({el:h,anchor:d},m,_)=>{let y;for(;h&&h!==d;)y=p(h),r(h,m,_),h=y;r(d,m,_)},et=({el:h,anchor:d})=>{let m;for(;h&&h!==d;)m=p(h),s(h),h=m;s(d)},It=(h,d,m,_,y,w,S,I,A)=>{d.type==="svg"?S="svg":d.type==="math"&&(S="mathml"),h==null?z(d,m,_,y,w,S,I,A):Gn(h,d,y,w,S,I,A)},z=(h,d,m,_,y,w,S,I)=>{let A,T;const{props:C,shapeFlag:M,transition:x,dirs:U}=h;if(A=h.el=o(h.type,w,C&&C.is,C),M&8?u(A,h.children):M&16&&Yt(h.children,A,null,_,y,Xi(h,w),S,I),U&&Qe(h,null,_,"created"),jt(A,h,h.scopeId,S,_),C){for(const nt in C)nt!=="value"&&!ar(nt)&&i(A,nt,null,C[nt],w,h.children,_,y,ve);"value"in C&&i(A,"value",null,C.value,w),(T=C.onVnodeBeforeMount)&&ce(T,_,h)}U&&Qe(h,null,_,"beforeMount");const K=wg(y,x);K&&x.beforeEnter(A),r(A,d,m),((T=C&&C.onVnodeMounted)||K||U)&&$t(()=>{T&&ce(T,_,h),K&&x.enter(A),U&&Qe(h,null,_,"mounted")},y)},jt=(h,d,m,_,y)=>{if(m&&g(h,m),_)for(let w=0;w<_.length;w++)g(h,_[w]);if(y){let w=y.subTree;if(d===w){const S=y.vnode;jt(h,S,S.scopeId,S.slotScopeIds,y.parent)}}},Yt=(h,d,m,_,y,w,S,I,A=0)=>{for(let T=A;T<h.length;T++){const C=h[T]=I?Ve(h[T]):ue(h[T]);P(null,C,d,m,_,y,w,S,I)}},Gn=(h,d,m,_,y,w,S)=>{const I=d.el=h.el;let{patchFlag:A,dynamicChildren:T,dirs:C}=d;A|=h.patchFlag&16;const M=h.props||it,x=d.props||it;let U;if(m&&Xe(m,!1),(U=x.onVnodeBeforeUpdate)&&ce(U,m,d,h),C&&Qe(d,h,m,"beforeUpdate"),m&&Xe(m,!0),T?oe(h.dynamicChildren,T,I,m,_,Xi(d,y),w):S||rt(h,d,I,null,m,_,Xi(d,y),w,!1),A>0){if(A&16)Wn(I,d,M,x,m,_,y);else if(A&2&&M.class!==x.class&&i(I,"class",null,x.class,y),A&4&&i(I,"style",M.style,x.style,y),A&8){const K=d.dynamicProps;for(let nt=0;nt<K.length;nt++){const at=K[nt],yt=M[at],Jt=x[at];(Jt!==yt||at==="value")&&i(I,at,yt,Jt,y,h.children,m,_,ve)}}A&1&&h.children!==d.children&&u(I,d.children)}else!S&&T==null&&Wn(I,d,M,x,m,_,y);((U=x.onVnodeUpdated)||C)&&$t(()=>{U&&ce(U,m,d,h),C&&Qe(d,h,m,"updated")},_)},oe=(h,d,m,_,y,w,S)=>{for(let I=0;I<d.length;I++){const A=h[I],T=d[I],C=A.el&&(A.type===te||!Yn(A,T)||A.shapeFlag&70)?f(A.el):m;P(A,T,C,null,_,y,w,S,!0)}},Wn=(h,d,m,_,y,w,S)=>{if(m!==_){if(m!==it)for(const I in m)!ar(I)&&!(I in _)&&i(h,I,m[I],null,S,d.children,y,w,ve);for(const I in _){if(ar(I))continue;const A=_[I],T=m[I];A!==T&&I!=="value"&&i(h,I,T,A,S,d.children,y,w,ve)}"value"in _&&i(h,"value",m.value,_.value,S)}},rs=(h,d,m,_,y,w,S,I,A)=>{const T=d.el=h?h.el:a(""),C=d.anchor=h?h.anchor:a("");let{patchFlag:M,dynamicChildren:x,slotScopeIds:U}=d;U&&(I=I?I.concat(U):U),h==null?(r(T,m,_),r(C,m,_),Yt(d.children||[],m,C,y,w,S,I,A)):M>0&&M&64&&x&&h.dynamicChildren?(oe(h.dynamicChildren,x,m,y,w,S,I),(d.key!=null||y&&d===y.subTree)&&oh(h,d,!0)):rt(h,d,m,C,y,w,S,I,A)},ss=(h,d,m,_,y,w,S,I,A)=>{d.slotScopeIds=I,h==null?d.shapeFlag&512?y.ctx.activate(d,m,_,S,A):qi(d,m,_,y,w,S,A):vl(h,d,A)},qi=(h,d,m,_,y,w,S)=>{const I=h.component=kg(h,_,y);if(Ku(h)&&(I.ctx.renderer=Qn),Lg(I),I.asyncDep){if(y&&y.registerDep(I,Lt),!h.el){const A=I.subTree=ge(wr);$(null,A,d,m)}}else Lt(I,h,d,m,y,w,S)},vl=(h,d,m)=>{const _=d.component=h.component;if(jp(h,d,m))if(_.asyncDep&&!_.asyncResolved){ct(_,d,m);return}else _.next=d,xp(_.update),_.effect.dirty=!0,_.update();else d.el=h.el,_.vnode=d},Lt=(h,d,m,_,y,w,S)=>{const I=()=>{if(h.isMounted){let{next:C,bu:M,u:x,parent:U,vnode:K}=h;{const gn=ah(h);if(gn){C&&(C.el=K.el,ct(h,C,S)),gn.asyncDep.then(()=>{h.isUnmounted||I()});return}}let nt=C,at;Xe(h,!1),C?(C.el=K.el,ct(h,C,S)):C=K,M&&Is(M),(at=C.props&&C.props.onVnodeBeforeUpdate)&&ce(at,U,C,K),Xe(h,!0);const yt=Gi(h),Jt=h.subTree;h.subTree=yt,P(Jt,yt,f(Jt.el),os(Jt),h,y,w),C.el=yt.el,nt===null&&$p(h,yt.el),x&&$t(x,y),(at=C.props&&C.props.onVnodeUpdated)&&$t(()=>ce(at,U,C,K),y)}else{let C;const{el:M,props:x}=d,{bm:U,m:K,parent:nt}=h,at=As(d);if(Xe(h,!1),U&&Is(U),!at&&(C=x&&x.onVnodeBeforeMount)&&ce(C,nt,d),Xe(h,!0),M&&Al){const yt=()=>{h.subTree=Gi(h),Al(M,h.subTree,h,y,null)};at?d.type.__asyncLoader().then(()=>!h.isUnmounted&&yt()):yt()}else{const yt=h.subTree=Gi(h);P(null,yt,m,_,h,y,w),d.el=yt.el}if(K&&$t(K,y),!at&&(C=x&&x.onVnodeMounted)){const yt=d;$t(()=>ce(C,nt,yt),y)}(d.shapeFlag&256||nt&&As(nt.vnode)&&nt.vnode.shapeFlag&256)&&h.a&&$t(h.a,y),h.isMounted=!0,d=m=_=null}},A=h.effect=new fa(I,Xt,()=>Ta(T),h.scope),T=h.update=()=>{A.dirty&&A.run()};T.id=h.uid,Xe(h,!0),T()},ct=(h,d,m)=>{d.component=h;const _=h.vnode.props;h.vnode=d,h.next=null,_g(h,d.props,_,m),vg(h,d.children,m),qe(),Ll(h),He()},rt=(h,d,m,_,y,w,S,I,A=!1)=>{const T=h&&h.children,C=h?h.shapeFlag:0,M=d.children,{patchFlag:x,shapeFlag:U}=d;if(x>0){if(x&128){is(T,M,m,_,y,w,S,I,A);return}else if(x&256){Ge(T,M,m,_,y,w,S,I,A);return}}U&8?(C&16&&ve(T,y,w),M!==T&&u(m,M)):C&16?U&16?is(T,M,m,_,y,w,S,I,A):ve(T,y,w,!0):(C&8&&u(m,""),U&16&&Yt(M,m,_,y,w,S,I,A))},Ge=(h,d,m,_,y,w,S,I,A)=>{h=h||In,d=d||In;const T=h.length,C=d.length,M=Math.min(T,C);let x;for(x=0;x<M;x++){const U=d[x]=A?Ve(d[x]):ue(d[x]);P(h[x],U,m,null,y,w,S,I,A)}T>C?ve(h,y,w,!0,!1,M):Yt(d,m,_,y,w,S,I,A,M)},is=(h,d,m,_,y,w,S,I,A)=>{let T=0;const C=d.length;let M=h.length-1,x=C-1;for(;T<=M&&T<=x;){const U=h[T],K=d[T]=A?Ve(d[T]):ue(d[T]);if(Yn(U,K))P(U,K,m,null,y,w,S,I,A);else break;T++}for(;T<=M&&T<=x;){const U=h[M],K=d[x]=A?Ve(d[x]):ue(d[x]);if(Yn(U,K))P(U,K,m,null,y,w,S,I,A);else break;M--,x--}if(T>M){if(T<=x){const U=x+1,K=U<C?d[U].el:_;for(;T<=x;)P(null,d[T]=A?Ve(d[T]):ue(d[T]),m,K,y,w,S,I,A),T++}}else if(T>x)for(;T<=M;)ae(h[T],y,w,!0),T++;else{const U=T,K=T,nt=new Map;for(T=K;T<=x;T++){const zt=d[T]=A?Ve(d[T]):ue(d[T]);zt.key!=null&&nt.set(zt.key,T)}let at,yt=0;const Jt=x-K+1;let gn=!1,Rl=0;const Xn=new Array(Jt);for(T=0;T<Jt;T++)Xn[T]=0;for(T=U;T<=M;T++){const zt=h[T];if(yt>=Jt){ae(zt,y,w,!0);continue}let le;if(zt.key!=null)le=nt.get(zt.key);else for(at=K;at<=x;at++)if(Xn[at-K]===0&&Yn(zt,d[at])){le=at;break}le===void 0?ae(zt,y,w,!0):(Xn[le-K]=T+1,le>=Rl?Rl=le:gn=!0,P(zt,d[le],m,null,y,w,S,I,A),yt++)}const Sl=gn?Ag(Xn):In;for(at=Sl.length-1,T=Jt-1;T>=0;T--){const zt=K+T,le=d[zt],Pl=zt+1<C?d[zt+1].el:_;Xn[T]===0?P(null,le,m,Pl,y,w,S,I,A):gn&&(at<0||T!==Sl[at]?We(le,m,Pl,2):at--)}}},We=(h,d,m,_,y=null)=>{const{el:w,type:S,transition:I,children:A,shapeFlag:T}=h;if(T&6){We(h.component.subTree,d,m,_);return}if(T&128){h.suspense.move(d,m,_);return}if(T&64){S.move(h,d,m,Qn);return}if(S===te){r(w,d,m);for(let M=0;M<A.length;M++)We(A[M],d,m,_);r(h.anchor,d,m);return}if(S===Ss){q(h,d,m);return}if(_!==2&&T&1&&I)if(_===0)I.beforeEnter(w),r(w,d,m),$t(()=>I.enter(w),y);else{const{leave:M,delayLeave:x,afterLeave:U}=I,K=()=>r(w,d,m),nt=()=>{M(w,()=>{K(),U&&U()})};x?x(w,K,nt):nt()}else r(w,d,m)},ae=(h,d,m,_=!1,y=!1)=>{const{type:w,props:S,ref:I,children:A,dynamicChildren:T,shapeFlag:C,patchFlag:M,dirs:x}=h;if(I!=null&&Co(I,null,m,h,!0),C&256){d.ctx.deactivate(h);return}const U=C&1&&x,K=!As(h);let nt;if(K&&(nt=S&&S.onVnodeBeforeUnmount)&&ce(nt,d,h),C&6)$d(h.component,m,_);else{if(C&128){h.suspense.unmount(m,_);return}U&&Qe(h,null,d,"beforeUnmount"),C&64?h.type.remove(h,d,m,y,Qn,_):T&&(w!==te||M>0&&M&64)?ve(T,d,m,!1,!0):(w===te&&M&384||!y&&C&16)&&ve(A,d,m),_&&Tl(h)}(K&&(nt=S&&S.onVnodeUnmounted)||U)&&$t(()=>{nt&&ce(nt,d,h),U&&Qe(h,null,d,"unmounted")},m)},Tl=h=>{const{type:d,el:m,anchor:_,transition:y}=h;if(d===te){jd(m,_);return}if(d===Ss){et(h);return}const w=()=>{s(m),y&&!y.persisted&&y.afterLeave&&y.afterLeave()};if(h.shapeFlag&1&&y&&!y.persisted){const{leave:S,delayLeave:I}=y,A=()=>S(m,w);I?I(h.el,w,A):A()}else w()},jd=(h,d)=>{let m;for(;h!==d;)m=p(h),s(h),h=m;s(d)},$d=(h,d,m)=>{const{bum:_,scope:y,update:w,subTree:S,um:I}=h;_&&Is(_),y.stop(),w&&(w.active=!1,ae(S,h,d,m)),I&&$t(I,d),$t(()=>{h.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},ve=(h,d,m,_=!1,y=!1,w=0)=>{for(let S=w;S<h.length;S++)ae(h[S],d,m,_,y)},os=h=>h.shapeFlag&6?os(h.component.subTree):h.shapeFlag&128?h.suspense.next():p(h.anchor||h.el);let Hi=!1;const Il=(h,d,m)=>{h==null?d._vnode&&ae(d._vnode,null,null,!0):P(d._vnode||null,h,d,null,null,null,m),Hi||(Hi=!0,Ll(),ju(),Hi=!1),d._vnode=h},Qn={p:P,um:ae,m:We,r:Tl,mt:qi,mc:Yt,pc:rt,pbc:oe,n:os,o:e};let wl,Al;return{render:Il,hydrate:wl,createApp:pg(Il,wl)}}function Xi({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Xe({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function wg(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function oh(e,t,n=!1){const r=e.children,s=t.children;if(F(r)&&F(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ve(s[i]),a.el=o.el),n||oh(o,a)),a.type===hi&&(a.el=o.el)}}function Ag(e){const t=e.slice(),n=[0];let r,s,i,o,a;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function ah(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ah(t)}const Rg=e=>e.__isTeleport,te=Symbol.for("v-fgt"),hi=Symbol.for("v-txt"),wr=Symbol.for("v-cmt"),Ss=Symbol.for("v-stc"),hr=[];let ee=null;function fr(e=!1){hr.push(ee=e?null:[])}function Sg(){hr.pop(),ee=hr[hr.length-1]||null}let Ar=1;function Gl(e){Ar+=e}function Pg(e){return e.dynamicChildren=Ar>0?ee||In:null,Sg(),Ar>0&&ee&&ee.push(e),e}function dr(e,t,n,r,s,i){return Pg(At(e,t,n,r,s,i,!0))}function Cg(e){return e?e.__v_isVNode===!0:!1}function Yn(e,t){return e.type===t.type&&e.key===t.key}const lh=({key:e})=>e??null,Ps=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?_t(e)||Ht(e)||H(e)?{i:Kt,r:e,k:t,f:!!n}:e:null);function At(e,t=null,n=null,r=0,s=null,i=e===te?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&lh(t),ref:t&&Ps(t),scopeId:ci,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Kt};return a?(Aa(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=_t(n)?8:16),Ar>0&&!o&&ee&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&ee.push(l),l}const ge=bg;function bg(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===qp)&&(e=wr),Cg(e)){const a=Vn(e,t,!0);return n&&Aa(a,n),Ar>0&&!i&&ee&&(a.shapeFlag&6?ee[ee.indexOf(e)]=a:ee.push(a)),a.patchFlag|=-2,a}if(jg(e)&&(e=e.__vccOpts),t){t=Vg(t);let{class:a,style:l}=t;a&&!_t(a)&&(t.class=ha(a)),ut(l)&&(Mu(l)&&!F(l)&&(l=bt({},l)),t.style=ua(l))}const o=_t(e)?1:Hp(e)?128:Rg(e)?64:ut(e)?4:H(e)?2:0;return At(e,t,n,r,s,o,i,!0)}function Vg(e){return e?Mu(e)||th(e)?bt({},e):e:null}function Vn(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=e,c=t?Ng(s||{},t):s,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&lh(c),ref:t&&t.ref?n&&i?F(i)?i.concat(Ps(t)):[i,Ps(t)]:Ps(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==te?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vn(e.ssContent),ssFallback:e.ssFallback&&Vn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&(u.transition=l.clone(u)),u}function Dg(e=" ",t=0){return ge(hi,null,e,t)}function xg(e,t){const n=ge(Ss,null,e);return n.staticCount=t,n}function ue(e){return e==null||typeof e=="boolean"?ge(wr):F(e)?ge(te,null,e.slice()):typeof e=="object"?Ve(e):ge(hi,null,String(e))}function Ve(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Vn(e)}function Aa(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(F(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Aa(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!th(t)?t._ctx=Kt:s===3&&Kt&&(Kt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else H(t)?(t={default:t,_ctx:Kt},n=32):(t=String(t),r&64?(n=16,t=[Dg(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ng(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=ha([t.class,r.class]));else if(s==="style")t.style=ua([t.style,r.style]);else if(ri(s)){const i=t[s],o=r[s];o&&i!==o&&!(F(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function ce(e,t,n,r=null){re(e,t,7,[n,r])}const Og=Yu();let Mg=0;function kg(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Og,i={uid:Mg++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new tp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:nh(r,s),emitsOptions:qu(r,s),emit:null,emitted:null,propsDefaults:it,inheritAttrs:r.inheritAttrs,ctx:it,data:it,props:it,attrs:it,slots:it,refs:it,setupState:it,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Mp.bind(null,i),e.ce&&e.ce(i),i}let Ut=null,Ls,bo;{const e=vu(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Ls=t("__VUE_INSTANCE_SETTERS__",n=>Ut=n),bo=t("__VUE_SSR_SETTERS__",n=>fi=n)}const $r=e=>{const t=Ut;return Ls(e),e.scope.on(),()=>{e.scope.off(),Ls(t)}},Wl=()=>{Ut&&Ut.scope.off(),Ls(null)};function ch(e){return e.vnode.shapeFlag&4}let fi=!1;function Lg(e,t=!1){t&&bo(t);const{props:n,children:r}=e.vnode,s=ch(e);mg(e,n,s,t),Eg(e,r);const i=s?Fg(e,t):void 0;return t&&bo(!1),i}function Fg(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ag);const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?Bg(e):null,i=$r(e);qe();const o=Oe(r,e,0,[e.props,s]);if(He(),i(),gu(o)){if(o.then(Wl,Wl),t)return o.then(a=>{Ql(e,a,t)}).catch(a=>{ai(a,e,0)});e.asyncDep=o}else Ql(e,o,t)}else uh(e,t)}function Ql(e,t,n){H(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ut(t)&&(e.setupState=Fu(t)),uh(e,n)}let Xl;function uh(e,t,n){const r=e.type;if(!e.render){if(!t&&Xl&&!r.render){const s=r.template||Ia(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,c=bt(bt({isCustomElement:i,delimiters:a},o),l);r.render=Xl(s,c)}}e.render=r.render||Xt}{const s=$r(e);qe();try{lg(e)}finally{He(),s()}}}const Ug={get(e,t){return qt(e,"get",""),e[t]}};function Bg(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Ug),slots:e.slots,emit:e.emit,expose:t}}function di(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Fu(wp(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in cr)return cr[n](e)},has(t,n){return n in t||n in cr}}))}function jg(e){return H(e)&&"__vccOpts"in e}const $g=(e,t)=>Ap(e,t,fi),qg="3.4.27";/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Hg="http://www.w3.org/2000/svg",zg="http://www.w3.org/1998/Math/MathML",De=typeof document<"u"?document:null,Yl=De&&De.createElement("template"),Kg={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?De.createElementNS(Hg,e):t==="mathml"?De.createElementNS(zg,e):De.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>De.createTextNode(e),createComment:e=>De.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>De.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Yl.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=Yl.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Gg=Symbol("_vtc");function Wg(e,t,n){const r=e[Gg];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Fs=Symbol("_vod"),hh=Symbol("_vsh"),Jl={beforeMount(e,{value:t},{transition:n}){e[Fs]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Jn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Jn(e,!0),r.enter(e)):r.leave(e,()=>{Jn(e,!1)}):Jn(e,t))},beforeUnmount(e,{value:t}){Jn(e,t)}};function Jn(e,t){e.style.display=t?e[Fs]:"none",e[hh]=!t}const Qg=Symbol(""),Xg=/(^|;)\s*display\s*:/;function Yg(e,t,n){const r=e.style,s=_t(n);let i=!1;if(n&&!s){if(t)if(_t(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Cs(r,a,"")}else for(const o in t)n[o]==null&&Cs(r,o,"");for(const o in n)o==="display"&&(i=!0),Cs(r,o,n[o])}else if(s){if(t!==n){const o=r[Qg];o&&(n+=";"+o),r.cssText=n,i=Xg.test(n)}}else t&&e.removeAttribute("style");Fs in e&&(e[Fs]=i?r.display:"",e[hh]&&(r.display="none"))}const Zl=/\s*!important$/;function Cs(e,t,n){if(F(n))n.forEach(r=>Cs(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Jg(e,t);Zl.test(n)?e.setProperty(Un(r),n.replace(Zl,""),"important"):e[r]=n}}const tc=["Webkit","Moz","ms"],Yi={};function Jg(e,t){const n=Yi[t];if(n)return n;let r=bn(t);if(r!=="filter"&&r in e)return Yi[t]=r;r=yu(r);for(let s=0;s<tc.length;s++){const i=tc[s]+r;if(i in e)return Yi[t]=i}return t}const ec="http://www.w3.org/1999/xlink";function Zg(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(ec,t.slice(6,t.length)):e.setAttributeNS(ec,t,n);else{const i=Zd(t);n==null||i&&!Tu(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function tm(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?e.getAttribute("value")||"":e.value,u=n??"";(c!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=Tu(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function _n(e,t,n,r){e.addEventListener(t,n,r)}function em(e,t,n,r){e.removeEventListener(t,n,r)}const nc=Symbol("_vei");function nm(e,t,n,r,s=null){const i=e[nc]||(e[nc]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=rm(t);if(r){const c=i[t]=om(r,s);_n(e,a,c,l)}else o&&(em(e,a,o,l),i[t]=void 0)}}const rc=/(?:Once|Passive|Capture)$/;function rm(e){let t;if(rc.test(e)){t={};let r;for(;r=e.match(rc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Un(e.slice(2)),t]}let Ji=0;const sm=Promise.resolve(),im=()=>Ji||(sm.then(()=>Ji=0),Ji=Date.now());function om(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;re(am(r,n.value),t,5,[r])};return n.value=e,n.attached=im(),n}function am(e,t){if(F(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const sc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,lm=(e,t,n,r,s,i,o,a,l)=>{const c=s==="svg";t==="class"?Wg(e,r,c):t==="style"?Yg(e,n,r):ri(t)?aa(t)||nm(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):cm(e,t,r,c))?tm(e,t,r,i,o,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Zg(e,t,r,c))};function cm(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&sc(t)&&H(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return sc(t)&&_t(n)?!1:t in e}const ic=e=>{const t=e.props["onUpdate:modelValue"]||!1;return F(t)?n=>Is(t,n):t};function um(e){e.target.composing=!0}function oc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Zi=Symbol("_assign"),hm={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Zi]=ic(s);const i=r||s.props&&s.props.type==="number";_n(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=_o(a)),e[Zi](a)}),n&&_n(e,"change",()=>{e.value=e.value.trim()}),t||(_n(e,"compositionstart",um),_n(e,"compositionend",oc),_n(e,"change",oc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[Zi]=ic(i),e.composing)return;const o=(s||e.type==="number")&&!/^0\d/.test(e.value)?_o(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===a)||(e.value=a))}},fm=["ctrl","shift","alt","meta"],dm={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>fm.some(n=>e[`${n}Key`]&&!t.includes(n))},pm=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<t.length;o++){const a=dm[t[o]];if(a&&a(s,t))return}return e(s,...i)})},gm=bt({patchProp:lm},Kg);let ac;function mm(){return ac||(ac=Tg(gm))}const _m=(...e)=>{const t=mm().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=Em(r);if(!s)return;const i=t._component;!H(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,ym(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function ym(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Em(e){return _t(e)?document.querySelector(e):e}const fh="/BSIT202/BSIT202LOGO.png",dh=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},vm={},Tm={class:"opening-message-body FLEX-COLUMN"},Im=xg('<img class="bsit-202-logo" src="'+fh+'" alt="logo" data-v-977d4700><div class="about-bsit-202" data-v-977d4700><h3 class="HEADER-SMALL M-TOP-2" data-v-977d4700>About BSIT202 Bardagulan</h3><p class="P-SMALL" data-v-977d4700> BSIT202 Bardagulan is a delightful online platform crafted purely for amusement, taking its inspiration from the renowned website named Chatkool. Here, individuals are encouraged to openly and unabashedly express their sentiments, whether they&#39;re directed towards others or anything else. It serves as a safe haven for those who may hesitate to convey their emotions directly, providing a space where one can articulate their thoughts freely and without inhibition. So, whether you&#39;re yearning to share your feelings about someone special, or perhaps harbor apprehensions about expressing certain sentiments, fear notBSIT202 Bardagulan welcomes you with open arms. May your experience within this whimsical realm be nothing short of delightful and fulfilling. </p></div><div class="terms-and-conditions-bsit-202" data-v-977d4700><h3 class="HEADER-SMALL M-TOP-1 WARNING-MESSAGE" data-v-977d4700>TERMS AND CONDITION</h3><p class="P-SMALL" data-v-977d4700> Welcome to our BSIT202 Bardagulan! Before you proceed, please take a moment to review our terms and conditions. By accessing or using our services, you agree to abide by these terms. <br data-v-977d4700><br data-v-977d4700><span class="P-HIGHLIGHT" data-v-977d4700>Zero Tolerance for Racism:</span> Racism in any form is strictly prohibited on our platform. We foster an inclusive and respectful community where individuals of all backgrounds are valued and treated with dignity. <br data-v-977d4700><br data-v-977d4700><span class="P-HIGHLIGHT" data-v-977d4700>Protection Against Sexual Abuse:</span> We unequivocally condemn any form of sexual abuse, especially towards girls. Our platform is committed to providing a safe environment free from harassment or exploitation of any kind. <br data-v-977d4700><br data-v-977d4700><span class="P-HIGHLIGHT" data-v-977d4700>No Hate Speech Directed at School Personnel or Teachers:</span> Sending hate speech or derogatory remarks towards any school personnel or teacher is unacceptable. We promote constructive communication and mutual respect among all members of the educational community. <br data-v-977d4700><br data-v-977d4700><span class="P-HIGHLIGHT" data-v-977d4700>Death Threats:</span> Any communication containing death threats will not be tolerated on our platform. Such behavior poses a serious threat to the safety and well-being of others and will result in immediate action. </p></div><div class="confirmation FLEX M-TOP-2" data-v-977d4700><input type="checkbox" data-v-977d4700><p data-v-977d4700>I read the terms and conditions</p></div>',4);function wm(e,t){return fr(),dr("body",Tm,[Im,At("button",{onClick:t[0]||(t[0]=n=>e.$emit("handleClick")),class:"proceed M-TOP-1"},"Proceed to chat")])}const Am=dh(vm,[["render",wm],["__scopeId","data-v-977d4700"]]);var lc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Rm=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},gh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[u],n[f],n[p],n[g])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ph(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Rm(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const f=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new Sm;const p=i<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const D=c<<6&192|f;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Sm extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pm=function(e){const t=ph(e);return gh.encodeByteArray(t,!0)},Us=function(e){return Pm(e).replace(/\./g,"")},Cm=function(e){try{return gh.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=()=>bm().__FIREBASE_DEFAULTS__,Dm=()=>{if(typeof process>"u"||typeof lc>"u")return;const e=lc.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},xm=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Cm(e[1]);return t&&JSON.parse(t)},Ra=()=>{try{return Vm()||Dm()||xm()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Nm=e=>{var t,n;return(n=(t=Ra())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Om=e=>{const t=Nm(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},mh=()=>{var e;return(e=Ra())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Us(JSON.stringify(n)),Us(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fm(){var e;const t=(e=Ra())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Um(){return!Fm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bm(){try{return typeof indexedDB=="object"}catch{return!1}}function jm(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="FirebaseError";class Bn extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=$m,Object.setPrototypeOf(this,Bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_h.prototype.create)}}class _h{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?qm(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Bn(s,a,r)}}function qm(e,t){return e.replace(Hm,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Hm=/\{\$([^}]+)}/g;function Vo(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if(cc(i)&&cc(o)){if(!Vo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function cc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(e){return e&&e._delegate?e._delegate:e}class Sr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Mm;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Gm(t))try{this.getOrInitializeService({instanceIdentifier:Ye})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Ye){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ye){return this.instances.has(t)}getOptions(t=Ye){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Km(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ye){return this.component?this.component.multipleInstances?t:Ye:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Km(e){return e===Ye?void 0:e}function Gm(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new zm(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Y||(Y={}));const Qm={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},Xm=Y.INFO,Ym={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},Jm=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Ym[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class yh{constructor(t){this.name=t,this._logLevel=Xm,this._logHandler=Jm,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Y))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Qm[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...t),this._logHandler(this,Y.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...t),this._logHandler(this,Y.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...t),this._logHandler(this,Y.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...t),this._logHandler(this,Y.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...t),this._logHandler(this,Y.ERROR,...t)}}const Zm=(e,t)=>t.some(n=>e instanceof n);let uc,hc;function t_(){return uc||(uc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e_(){return hc||(hc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Eh=new WeakMap,Do=new WeakMap,vh=new WeakMap,to=new WeakMap,Sa=new WeakMap;function n_(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(Me(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Eh.set(n,e)}).catch(()=>{}),Sa.set(t,e),t}function r_(e){if(Do.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Do.set(e,t)}let xo={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Do.get(e);if(t==="objectStoreNames")return e.objectStoreNames||vh.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Me(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function s_(e){xo=e(xo)}function i_(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(eo(this),t,...n);return vh.set(r,t.sort?t.sort():[t]),Me(r)}:e_().includes(e)?function(...t){return e.apply(eo(this),t),Me(Eh.get(this))}:function(...t){return Me(e.apply(eo(this),t))}}function o_(e){return typeof e=="function"?i_(e):(e instanceof IDBTransaction&&r_(e),Zm(e,t_())?new Proxy(e,xo):e)}function Me(e){if(e instanceof IDBRequest)return n_(e);if(to.has(e))return to.get(e);const t=o_(e);return t!==e&&(to.set(e,t),Sa.set(t,e)),t}const eo=e=>Sa.get(e);function a_(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=Me(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Me(o.result),l.oldVersion,l.newVersion,Me(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const l_=["get","getKey","getAll","getAllKeys","count"],c_=["put","add","delete","clear"],no=new Map;function fc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(no.get(t))return no.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=c_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||l_.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return no.set(t,i),i}s_(e=>({...e,get:(t,n,r)=>fc(t,n)||e.get(t,n,r),has:(t,n)=>!!fc(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(h_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function h_(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const No="@firebase/app",dc="0.10.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new yh("@firebase/app"),f_="@firebase/app-compat",d_="@firebase/analytics-compat",p_="@firebase/analytics",g_="@firebase/app-check-compat",m_="@firebase/app-check",__="@firebase/auth",y_="@firebase/auth-compat",E_="@firebase/database",v_="@firebase/database-compat",T_="@firebase/functions",I_="@firebase/functions-compat",w_="@firebase/installations",A_="@firebase/installations-compat",R_="@firebase/messaging",S_="@firebase/messaging-compat",P_="@firebase/performance",C_="@firebase/performance-compat",b_="@firebase/remote-config",V_="@firebase/remote-config-compat",D_="@firebase/storage",x_="@firebase/storage-compat",N_="@firebase/firestore",O_="@firebase/firestore-compat",M_="firebase",k_="10.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="[DEFAULT]",L_={[No]:"fire-core",[f_]:"fire-core-compat",[p_]:"fire-analytics",[d_]:"fire-analytics-compat",[m_]:"fire-app-check",[g_]:"fire-app-check-compat",[__]:"fire-auth",[y_]:"fire-auth-compat",[E_]:"fire-rtdb",[v_]:"fire-rtdb-compat",[T_]:"fire-fn",[I_]:"fire-fn-compat",[w_]:"fire-iid",[A_]:"fire-iid-compat",[R_]:"fire-fcm",[S_]:"fire-fcm-compat",[P_]:"fire-perf",[C_]:"fire-perf-compat",[b_]:"fire-rc",[V_]:"fire-rc-compat",[D_]:"fire-gcs",[x_]:"fire-gcs-compat",[N_]:"fire-fst",[O_]:"fire-fst-compat","fire-js":"fire-js",[M_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new Map,F_=new Map,Mo=new Map;function pc(e,t){try{e.container.addComponent(t)}catch(n){an.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function js(e){const t=e.name;if(Mo.has(t))return an.debug(`There were multiple attempts to register component ${t}.`),!1;Mo.set(t,e);for(const n of Bs.values())pc(n,e);for(const n of F_.values())pc(n,e);return!0}function U_(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ke=new _h("app","Firebase",B_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ke.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=k_;function Th(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Oo,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw ke.create("bad-app-name",{appName:String(s)});if(n||(n=mh()),!n)throw ke.create("no-options");const i=Bs.get(s);if(i){if(Vo(n,i.options)&&Vo(r,i.config))return i;throw ke.create("duplicate-app",{appName:s})}const o=new Wm(s);for(const l of Mo.values())o.addComponent(l);const a=new j_(n,r,o);return Bs.set(s,a),a}function q_(e=Oo){const t=Bs.get(e);if(!t&&e===Oo&&mh())return Th();if(!t)throw ke.create("no-app",{appName:e});return t}function Rn(e,t,n){var r;let s=(r=L_[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),an.warn(a.join(" "));return}js(new Sr(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="firebase-heartbeat-database",z_=1,Pr="firebase-heartbeat-store";let ro=null;function Ih(){return ro||(ro=a_(H_,z_,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Pr)}catch(n){console.warn(n)}}}}).catch(e=>{throw ke.create("idb-open",{originalErrorMessage:e.message})})),ro}async function K_(e){try{const n=(await Ih()).transaction(Pr),r=await n.objectStore(Pr).get(wh(e));return await n.done,r}catch(t){if(t instanceof Bn)an.warn(t.message);else{const n=ke.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});an.warn(n.message)}}}async function gc(e,t){try{const r=(await Ih()).transaction(Pr,"readwrite");await r.objectStore(Pr).put(t,wh(e)),await r.done}catch(n){if(n instanceof Bn)an.warn(n.message);else{const r=ke.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});an.warn(r.message)}}}function wh(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=1024,W_=30*24*60*60*1e3;class Q_{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Y_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mc();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=W_}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mc(),{heartbeatsToSend:r,unsentEntries:s}=X_(this._heartbeatsCache.heartbeats),i=Us(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function mc(){return new Date().toISOString().substring(0,10)}function X_(e,t=G_){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),_c(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_c(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Y_{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bm()?jm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await K_(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return gc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return gc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function _c(e){return Us(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(e){js(new Sr("platform-logger",t=>new u_(t),"PRIVATE")),js(new Sr("heartbeat",t=>new Q_(t),"PRIVATE")),Rn(No,dc,e),Rn(No,dc,"esm2017"),Rn("fire-js","")}J_("");var Z_="firebase",ty="10.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn(Z_,ty,"app");var ey=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},R,Pa=Pa||{},L=ey||self;function pi(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function gi(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function ny(e){return Object.prototype.hasOwnProperty.call(e,so)&&e[so]||(e[so]=++ry)}var so="closure_uid_"+(1e9*Math.random()>>>0),ry=0;function sy(e,t,n){return e.call.apply(e.bind,arguments)}function iy(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function Ot(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ot=sy:Ot=iy,Ot.apply(null,arguments)}function ds(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Tt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function ze(){this.s=this.s,this.o=this.o}var oy=0;ze.prototype.s=!1;ze.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),oy!=0)&&ny(this)};ze.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ah=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ca(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function yc(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(pi(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function Mt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var ay=function(){if(!L.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};L.addEventListener("test",n,t),L.removeEventListener("test",n,t)}catch{}return e}();function Cr(e){return/^[\s\xa0]*$/.test(e)}function mi(){var e=L.navigator;return e&&(e=e.userAgent)?e:""}function fe(e){return mi().indexOf(e)!=-1}function ba(e){return ba[" "](e),e}ba[" "]=function(){};function ly(e,t){var n=eE;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var cy=fe("Opera"),Dn=fe("Trident")||fe("MSIE"),Rh=fe("Edge"),ko=Rh||Dn,Sh=fe("Gecko")&&!(mi().toLowerCase().indexOf("webkit")!=-1&&!fe("Edge"))&&!(fe("Trident")||fe("MSIE"))&&!fe("Edge"),uy=mi().toLowerCase().indexOf("webkit")!=-1&&!fe("Edge");function Ph(){var e=L.document;return e?e.documentMode:void 0}var Lo;t:{var io="",oo=function(){var e=mi();if(Sh)return/rv:([^\);]+)(\)|;)/.exec(e);if(Rh)return/Edge\/([\d\.]+)/.exec(e);if(Dn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(uy)return/WebKit\/(\S+)/.exec(e);if(cy)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(oo&&(io=oo?oo[1]:""),Dn){var ao=Ph();if(ao!=null&&ao>parseFloat(io)){Lo=String(ao);break t}}Lo=io}var Fo;if(L.document&&Dn){var Ec=Ph();Fo=Ec||parseInt(Lo,10)||void 0}else Fo=void 0;var hy=Fo;function br(e,t){if(Mt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Sh){t:{try{ba(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:fy[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&br.$.h.call(this)}}Tt(br,Mt);var fy={2:"touch",3:"pen",4:"mouse"};br.prototype.h=function(){br.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var _i="closure_listenable_"+(1e6*Math.random()|0),dy=0;function py(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++dy,this.fa=this.ia=!1}function yi(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Va(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function gy(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function Ch(e){const t={};for(const n in e)t[n]=e[n];return t}const vc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bh(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<vc.length;i++)n=vc[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ei(e){this.src=e,this.g={},this.h=0}Ei.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=Bo(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new py(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function Uo(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=Ah(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(yi(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Bo(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var Da="closure_lm_"+(1e6*Math.random()|0),lo={};function Vh(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Vh(e,t[i],n,r,s);return null}return n=Nh(n),e&&e[_i]?e.O(t,n,gi(r)?!!r.capture:!!r,s):my(e,t,n,!1,r,s)}function my(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=gi(s)?!!s.capture:!!s,a=Na(e);if(a||(e[Da]=a=new Ei(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=_y(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ay||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(xh(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function _y(){function e(n){return t.call(e.src,e.listener,n)}const t=yy;return e}function Dh(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Dh(e,t[i],n,r,s);else r=gi(r)?!!r.capture:!!r,n=Nh(n),e&&e[_i]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=Bo(i,n,r,s),-1<n&&(yi(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=Na(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Bo(t,n,r,s)),(n=-1<e?t[e]:null)&&xa(n))}function xa(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[_i])Uo(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(xh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Na(t))?(Uo(n,e),n.h==0&&(n.src=null,t[Da]=null)):yi(e)}}}function xh(e){return e in lo?lo[e]:lo[e]="on"+e}function yy(e,t){if(e.fa)e=!0;else{t=new br(t,this);var n=e.listener,r=e.la||e.src;e.ia&&xa(e),e=n.call(r,t)}return e}function Na(e){return e=e[Da],e instanceof Ei?e:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nh(e){return typeof e=="function"?e:(e[co]||(e[co]=function(t){return e.handleEvent(t)}),e[co])}function vt(){ze.call(this),this.i=new Ei(this),this.S=this,this.J=null}Tt(vt,ze);vt.prototype[_i]=!0;vt.prototype.removeEventListener=function(e,t,n,r){Dh(this,e,t,n,r)};function Pt(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Mt(t,e);else if(t instanceof Mt)t.target=t.target||e;else{var s=t;t=new Mt(r,e),bh(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=ps(o,r,!0,t)&&s}if(o=t.g=e,s=ps(o,r,!0,t)&&s,s=ps(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=ps(o,r,!1,t)&&s}vt.prototype.N=function(){if(vt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)yi(n[r]);delete e.g[t],e.h--}}this.J=null};vt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};vt.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function ps(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Uo(e.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Oa=L.JSON.stringify;class Ey{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function vy(){var e=Ma;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class Ty{constructor(){this.h=this.g=null}add(t,n){const r=Oh.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Oh=new Ey(()=>new Iy,e=>e.reset());class Iy{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function wy(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ay(e){L.setTimeout(()=>{throw e},0)}let Vr,Dr=!1,Ma=new Ty,Mh=()=>{const e=L.Promise.resolve(void 0);Vr=()=>{e.then(Ry)}};var Ry=()=>{for(var e;e=vy();){try{e.h.call(e.g)}catch(n){Ay(n)}var t=Oh;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Dr=!1};function vi(e,t){vt.call(this),this.h=e||1,this.g=t||L,this.j=Ot(this.qb,this),this.l=Date.now()}Tt(vi,vt);R=vi.prototype;R.ga=!1;R.T=null;R.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pt(this,"tick"),this.ga&&(ka(this),this.start()))}};R.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ka(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}R.N=function(){vi.$.N.call(this),ka(this),delete this.g};function La(e,t,n){if(typeof e=="function")n&&(e=Ot(e,n));else if(e&&typeof e.handleEvent=="function")e=Ot(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:L.setTimeout(e,t||0)}function kh(e){e.g=La(()=>{e.g=null,e.i&&(e.i=!1,kh(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class Sy extends ze{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:kh(this)}N(){super.N(),this.g&&(L.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xr(e){ze.call(this),this.h=e,this.g={}}Tt(xr,ze);var Tc=[];function Lh(e,t,n,r){Array.isArray(n)||(n&&(Tc[0]=n.toString()),n=Tc);for(var s=0;s<n.length;s++){var i=Vh(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Fh(e){Va(e.g,function(t,n){this.g.hasOwnProperty(n)&&xa(t)},e),e.g={}}xr.prototype.N=function(){xr.$.N.call(this),Fh(this)};xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ti(){this.g=!0}Ti.prototype.Ea=function(){this.g=!1};function Py(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function Cy(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function Tn(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+Vy(e,n)+(r?" "+r:"")})}function by(e,t){e.info(function(){return"TIMEOUT: "+t})}Ti.prototype.info=function(){};function Vy(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Oa(n)}catch{return t}}var fn={},Ic=null;function Ii(){return Ic=Ic||new vt}fn.Ta="serverreachability";function Uh(e){Mt.call(this,fn.Ta,e)}Tt(Uh,Mt);function Nr(e){const t=Ii();Pt(t,new Uh(t))}fn.STAT_EVENT="statevent";function Bh(e,t){Mt.call(this,fn.STAT_EVENT,e),this.stat=t}Tt(Bh,Mt);function Bt(e){const t=Ii();Pt(t,new Bh(t,e))}fn.Ua="timingevent";function jh(e,t){Mt.call(this,fn.Ua,e),this.size=t}Tt(jh,Mt);function qr(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return L.setTimeout(function(){e()},t)}var wi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$h={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Fa(){}Fa.prototype.h=null;function wc(e){return e.h||(e.h=e.i())}function qh(){}var Hr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ua(){Mt.call(this,"d")}Tt(Ua,Mt);function Ba(){Mt.call(this,"c")}Tt(Ba,Mt);var jo;function Ai(){}Tt(Ai,Fa);Ai.prototype.g=function(){return new XMLHttpRequest};Ai.prototype.i=function(){return{}};jo=new Ai;function zr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new xr(this),this.P=Dy,e=ko?125:void 0,this.V=new vi(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Hh}function Hh(){this.i=null,this.g="",this.h=!1}var Dy=45e3,zh={},$o={};R=zr.prototype;R.setTimeout=function(e){this.P=e};function qo(e,t,n){e.L=1,e.A=Si(Ae(t)),e.u=n,e.S=!0,Kh(e,null)}function Kh(e,t){e.G=Date.now(),Kr(e),e.B=Ae(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),tf(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Hh,e.g=If(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Sy(Ot(e.Pa,e,e.g),e.O)),Lh(e.U,e.g,"readystatechange",e.nb),t=e.I?Ch(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Nr(),Py(e.j,e.v,e.B,e.m,e.W,e.u)}R.nb=function(e){e=e.target;const t=this.M;t&&de(e)==3?t.l():this.Pa(e)};R.Pa=function(e){try{if(e==this.g)t:{const u=de(this.g);var t=this.g.Ia();const f=this.g.da();if(!(3>u)&&(u!=3||ko||this.g&&(this.h.h||this.g.ja()||Pc(this.g)))){this.J||u!=4||t==7||(t==8||0>=f?Nr(3):Nr(2)),Ri(this);var n=this.g.da();this.ca=n;e:if(Gh(this)){var r=Pc(this.g);e="";var s=r.length,i=de(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),pr(this);var o="";break e}this.h.i=new L.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Cy(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cr(a)){var c=a;break e}}c=null}if(n=c)Tn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ho(this,n);else{this.i=!1,this.s=3,Bt(12),tn(this),pr(this);break t}}this.S?(Wh(this,u,o),ko&&this.i&&u==3&&(Lh(this.U,this.V,"tick",this.mb),this.V.start())):(Tn(this.j,this.m,o,null),Ho(this,o)),u==4&&tn(this),this.i&&!this.J&&(u==4?yf(this.l,this):(this.i=!1,Kr(this)))}else Jy(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),tn(this),pr(this)}}}catch{}finally{}};function Gh(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function Wh(e,t,n){let r=!0,s;for(;!e.J&&e.o<n.length;)if(s=xy(e,n),s==$o){t==4&&(e.s=4,Bt(14),r=!1),Tn(e.j,e.m,null,"[Incomplete Response]");break}else if(s==zh){e.s=4,Bt(15),Tn(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Tn(e.j,e.m,s,null),Ho(e,s);Gh(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,Bt(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ka(t),t.M=!0,Bt(11))):(Tn(e.j,e.m,n,"[Invalid Chunked Response]"),tn(e),pr(e))}R.mb=function(){if(this.g){var e=de(this.g),t=this.g.ja();this.o<t.length&&(Ri(this),Wh(this,e,t),this.i&&e!=4&&Kr(this))}};function xy(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?$o:(n=Number(t.substring(n,r)),isNaN(n)?zh:(r+=1,r+n>t.length?$o:(t=t.slice(r,r+n),e.o=r+n,t)))}R.cancel=function(){this.J=!0,tn(this)};function Kr(e){e.Y=Date.now()+e.P,Qh(e,e.P)}function Qh(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=qr(Ot(e.lb,e),t)}function Ri(e){e.C&&(L.clearTimeout(e.C),e.C=null)}R.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(by(this.j,this.B),this.L!=2&&(Nr(),Bt(17)),tn(this),this.s=2,pr(this)):Qh(this,this.Y-e)};function pr(e){e.l.H==0||e.J||yf(e.l,e)}function tn(e){Ri(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,ka(e.V),Fh(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ho(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||zo(n.i,e))){if(!e.K&&zo(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Hs(n),bi(n);else break t;za(n),Bt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=qr(Ot(n.ib,n),6e3));if(1>=rf(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else en(n,11)}else if((e.K||n.g==e)&&Hs(n),!Cr(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const g=e.g;if(g){const D=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(D){var i=r.i;i.g||D.indexOf("spdy")==-1&&D.indexOf("quic")==-1&&D.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(ja(i,i.h),i.h=null))}if(r.F){const P=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;P&&(r.Da=P,ot(r.I,r.F,P))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=Tf(r,r.J?r.pa:null,r.Y),o.K){sf(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Ri(a),Kr(a)),r.g=o}else mf(r);0<n.j.length&&Vi(n)}else c[0]!="stop"&&c[0]!="close"||en(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?en(n,7):Ha(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Nr(4)}catch{}}function Ny(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(pi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function Oy(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(pi(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function Xh(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(pi(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=Oy(e),r=Ny(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var Yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function My(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function on(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof on){this.h=e.h,$s(this,e.j),this.s=e.s,this.g=e.g,qs(this,e.m),this.l=e.l;var t=e.i,n=new Or;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ac(this,n),this.o=e.o}else e&&(t=String(e).match(Yh))?(this.h=!1,$s(this,t[1]||"",!0),this.s=rr(t[2]||""),this.g=rr(t[3]||"",!0),qs(this,t[4]),this.l=rr(t[5]||"",!0),Ac(this,t[6]||"",!0),this.o=rr(t[7]||"")):(this.h=!1,this.i=new Or(null,this.h))}on.prototype.toString=function(){var e=[],t=this.j;t&&e.push(sr(t,Rc,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(sr(t,Rc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(sr(n,n.charAt(0)=="/"?Fy:Ly,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",sr(n,By)),e.join("")};function Ae(e){return new on(e)}function $s(e,t,n){e.j=n?rr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function qs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ac(e,t,n){t instanceof Or?(e.i=t,jy(e.i,e.h)):(n||(t=sr(t,Uy)),e.i=new Or(t,e.h))}function ot(e,t,n){e.i.set(t,n)}function Si(e){return ot(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function rr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function sr(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,ky),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ky(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Rc=/[#\/\?@]/g,Ly=/[#\?:]/g,Fy=/[#\?]/g,Uy=/[#\?@]/g,By=/#/g;function Or(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ke(e){e.g||(e.g=new Map,e.h=0,e.i&&My(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}R=Or.prototype;R.add=function(e,t){Ke(this),this.i=null,e=jn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Jh(e,t){Ke(e),t=jn(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Zh(e,t){return Ke(e),t=jn(e,t),e.g.has(t)}R.forEach=function(e,t){Ke(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};R.ta=function(){Ke(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};R.Z=function(e){Ke(this);let t=[];if(typeof e=="string")Zh(this,e)&&(t=t.concat(this.g.get(jn(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};R.set=function(e,t){return Ke(this),this.i=null,e=jn(this,e),Zh(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};R.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function tf(e,t,n){Jh(e,t),0<n.length&&(e.i=null,e.g.set(jn(e,t),Ca(n)),e.h+=n.length)}R.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function jn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function jy(e,t){t&&!e.j&&(Ke(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Jh(this,r),tf(this,s,n))},e)),e.j=t}var $y=class{constructor(e,t){this.g=e,this.map=t}};function ef(e){this.l=e||qy,L.PerformanceNavigationTiming?(e=L.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(L.g&&L.g.Ka&&L.g.Ka()&&L.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qy=10;function nf(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function rf(e){return e.h?1:e.g?e.g.size:0}function zo(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function ja(e,t){e.g?e.g.add(t):e.h=t}function sf(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}ef.prototype.cancel=function(){if(this.i=of(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function of(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ca(e.i)}var Hy=class{stringify(e){return L.JSON.stringify(e,void 0)}parse(e){return L.JSON.parse(e,void 0)}};function zy(){this.g=new Hy}function Ky(e,t,n){const r=n||"";try{Xh(e,function(s,i){let o=s;gi(s)&&(o=Oa(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Gy(e,t){const n=new Ti;if(L.Image){const r=new Image;r.onload=ds(gs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ds(gs,n,r,"TestLoadImage: error",!1,t),r.onabort=ds(gs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ds(gs,n,r,"TestLoadImage: timeout",!1,t),L.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function gs(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function Gr(e){this.l=e.ec||null,this.j=e.ob||!1}Tt(Gr,Fa);Gr.prototype.g=function(){return new Pi(this.l,this.j)};Gr.prototype.i=function(e){return function(){return e}}({});function Pi(e,t){vt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=$a,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tt(Pi,vt);var $a=0;R=Pi.prototype;R.open=function(e,t){if(this.readyState!=$a)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Mr(this)};R.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||L).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};R.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wr(this)),this.readyState=$a};R.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Mr(this)),this.g&&(this.readyState=3,Mr(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof L.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;af(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function af(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}R.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Wr(this):Mr(this),this.readyState==3&&af(this)}};R.Za=function(e){this.g&&(this.response=this.responseText=e,Wr(this))};R.Ya=function(e){this.g&&(this.response=e,Wr(this))};R.ka=function(){this.g&&Wr(this)};function Wr(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Mr(e)}R.setRequestHeader=function(e,t){this.v.append(e,t)};R.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};R.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Mr(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var Wy=L.JSON.parse;function ft(e){vt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=lf,this.L=this.M=!1}Tt(ft,vt);var lf="",Qy=/^https?$/i,Xy=["POST","PUT"];R=ft.prototype;R.Oa=function(e){this.M=e};R.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jo.g(),this.C=this.u?wc(this.u):wc(jo),this.g.onreadystatechange=Ot(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){Sc(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=L.FormData&&e instanceof L.FormData,!(0<=Ah(Xy,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{hf(this),0<this.B&&((this.L=Yy(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ot(this.ua,this)):this.A=La(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Sc(this,i)}};function Yy(e){return Dn&&typeof e.timeout=="number"&&e.ontimeout!==void 0}R.ua=function(){typeof Pa<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pt(this,"timeout"),this.abort(8))};function Sc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,cf(e),Ci(e)}function cf(e){e.F||(e.F=!0,Pt(e,"complete"),Pt(e,"error"))}R.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Pt(this,"complete"),Pt(this,"abort"),Ci(this))};R.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ci(this,!0)),ft.$.N.call(this)};R.La=function(){this.s||(this.G||this.v||this.l?uf(this):this.kb())};R.kb=function(){uf(this)};function uf(e){if(e.h&&typeof Pa<"u"&&(!e.C[1]||de(e)!=4||e.da()!=2)){if(e.v&&de(e)==4)La(e.La,0,e);else if(Pt(e,"readystatechange"),de(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(Yh)[1]||null;!s&&L.self&&L.self.location&&(s=L.self.location.protocol.slice(0,-1)),r=!Qy.test(s?s.toLowerCase():"")}n=r}if(n)Pt(e,"complete"),Pt(e,"success");else{e.m=6;try{var i=2<de(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",cf(e)}}finally{Ci(e)}}}}function Ci(e,t){if(e.g){hf(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Pt(e,"ready");try{n.onreadystatechange=r}catch{}}}function hf(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(L.clearTimeout(e.A),e.A=null)}R.isActive=function(){return!!this.g};function de(e){return e.g?e.g.readyState:0}R.da=function(){try{return 2<de(this)?this.g.status:-1}catch{return-1}};R.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};R.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Wy(t)}};function Pc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case lf:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Jy(e){const t={};e=(e.g&&2<=de(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(Cr(e[r]))continue;var n=wy(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}gy(t,function(r){return r.join(", ")})}R.Ia=function(){return this.m};R.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ff(e){let t="";return Va(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function qa(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=ff(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):ot(e,t,n))}function Zn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function df(e){this.Ga=0,this.j=[],this.l=new Ti,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zn("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zn("baseRetryDelayMs",5e3,e),this.hb=Zn("retryDelaySeedMs",1e4,e),this.eb=Zn("forwardChannelMaxRetries",2,e),this.xa=Zn("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ef(e&&e.concurrentRequestLimit),this.Ja=new zy,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}R=df.prototype;R.ra=8;R.H=1;function Ha(e){if(pf(e),e.H==3){var t=e.W++,n=Ae(e.I);if(ot(n,"SID",e.K),ot(n,"RID",t),ot(n,"TYPE","terminate"),Qr(e,n),t=new zr(e,e.l,t),t.L=2,t.A=Si(Ae(n)),n=!1,L.navigator&&L.navigator.sendBeacon)try{n=L.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&L.Image&&(new Image().src=t.A,n=!0),n||(t.g=If(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Kr(t)}vf(e)}function bi(e){e.g&&(Ka(e),e.g.cancel(),e.g=null)}function pf(e){bi(e),e.u&&(L.clearTimeout(e.u),e.u=null),Hs(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&L.clearTimeout(e.m),e.m=null)}function Vi(e){if(!nf(e.i)&&!e.m){e.m=!0;var t=e.Na;Vr||Mh(),Dr||(Vr(),Dr=!0),Ma.add(t,e),e.C=0}}function Zy(e,t){return rf(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=qr(Ot(e.Na,e,t),Ef(e,e.C)),e.C++,!0)}R.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new zr(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Ch(i),bh(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=gf(this,s,t),n=Ae(this.I),ot(n,"RID",e),ot(n,"CVER",22),this.F&&ot(n,"X-HTTP-Session-Id",this.F),Qr(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(ff(i)))+"&"+t:this.o&&qa(n,this.o,i)),ja(this.i,s),this.bb&&ot(n,"TYPE","init"),this.P?(ot(n,"$req",t),ot(n,"SID","null"),s.aa=!0,qo(s,n,null)):qo(s,n,t),this.H=2}}else this.H==3&&(e?Cc(this,e):this.j.length==0||nf(this.i)||Cc(this))};function Cc(e,t){var n;t?n=t.m:n=e.W++;const r=Ae(e.I);ot(r,"SID",e.K),ot(r,"RID",n),ot(r,"AID",e.V),Qr(e,r),e.o&&e.s&&qa(r,e.o,e.s),n=new zr(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=gf(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ja(e.i,n),qo(n,r,t)}function Qr(e,t){e.na&&Va(e.na,function(n,r){ot(t,r,n)}),e.h&&Xh({},function(n,r){ot(t,r,n)})}function gf(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ot(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{Ky(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function mf(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Vr||Mh(),Dr||(Vr(),Dr=!0),Ma.add(t,e),e.A=0}}function za(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=qr(Ot(e.Ma,e),Ef(e,e.A)),e.A++,!0)}R.Ma=function(){if(this.u=null,_f(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=qr(Ot(this.jb,this),e)}};R.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Bt(10),bi(this),_f(this))};function Ka(e){e.B!=null&&(L.clearTimeout(e.B),e.B=null)}function _f(e){e.g=new zr(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Ae(e.wa);ot(t,"RID","rpc"),ot(t,"SID",e.K),ot(t,"AID",e.V),ot(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ot(t,"TO",e.qa),ot(t,"TYPE","xmlhttp"),Qr(e,t),e.o&&e.s&&qa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Si(Ae(t)),n.u=null,n.S=!0,Kh(n,e)}R.ib=function(){this.v!=null&&(this.v=null,bi(this),za(this),Bt(19))};function Hs(e){e.v!=null&&(L.clearTimeout(e.v),e.v=null)}function yf(e,t){var n=null;if(e.g==t){Hs(e),Ka(e),e.g=null;var r=2}else if(zo(e.i,t))n=t.F,sf(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var s=e.C;r=Ii(),Pt(r,new jh(r,n)),Vi(e)}else mf(e);else if(s=t.s,s==3||s==0&&0<t.ca||!(r==1&&Zy(e,t)||r==2&&za(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:en(e,5);break;case 4:en(e,10);break;case 3:en(e,6);break;default:en(e,2)}}}function Ef(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function en(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Ot(e.pb,e);n||(n=new on("//www.google.com/images/cleardot.gif"),L.location&&L.location.protocol=="http"||$s(n,"https"),Si(n)),Gy(n.toString(),r)}else Bt(2);e.H=0,e.h&&e.h.za(t),vf(e),pf(e)}R.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Bt(2)):(this.l.info("Failed to ping google.com"),Bt(1))};function vf(e){if(e.H=0,e.ma=[],e.h){const t=of(e.i);(t.length!=0||e.j.length!=0)&&(yc(e.ma,t),yc(e.ma,e.j),e.i.i.length=0,Ca(e.j),e.j.length=0),e.h.ya()}}function Tf(e,t,n){var r=n instanceof on?Ae(n):new on(n);if(r.g!="")t&&(r.g=t+"."+r.g),qs(r,r.m);else{var s=L.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new on(null);r&&$s(i,r),t&&(i.g=t),s&&qs(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&ot(r,n,t),ot(r,"VER",e.ra),Qr(e,r),r}function If(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new ft(new Gr({ob:n})):new ft(e.va),t.Oa(e.J),t}R.isActive=function(){return!!this.h&&this.h.isActive(this)};function wf(){}R=wf.prototype;R.Ba=function(){};R.Aa=function(){};R.za=function(){};R.ya=function(){};R.isActive=function(){return!0};R.Va=function(){};function zs(){if(Dn&&!(10<=Number(hy)))throw Error("Environmental error: no available transport.")}zs.prototype.g=function(e,t){return new Gt(e,t)};function Gt(e,t){vt.call(this),this.g=new df(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Cr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Cr(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new $n(this)}Tt(Gt,vt);Gt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Bt(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Tf(e,null,e.Y),Vi(e)};Gt.prototype.close=function(){Ha(this.g)};Gt.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Oa(e),e=n);t.j.push(new $y(t.fb++,e)),t.H==3&&Vi(t)};Gt.prototype.N=function(){this.g.h=null,delete this.j,Ha(this.g),delete this.g,Gt.$.N.call(this)};function Af(e){Ua.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Tt(Af,Ua);function Rf(){Ba.call(this),this.status=1}Tt(Rf,Ba);function $n(e){this.g=e}Tt($n,wf);$n.prototype.Ba=function(){Pt(this.g,"a")};$n.prototype.Aa=function(e){Pt(this.g,new Af(e))};$n.prototype.za=function(e){Pt(this.g,new Rf)};$n.prototype.ya=function(){Pt(this.g,"b")};function tE(){this.blockSize=-1}function ie(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Tt(ie,tE);ie.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function uo(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}ie.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)uo(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){uo(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){uo(this,r),s=0;break}}this.h=s,this.i+=t};ie.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function tt(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var eE={};function Ga(e){return-128<=e&&128>e?ly(e,function(t){return new tt([t|0],0>t?-1:0)}):new tt([e|0],0>e?-1:0)}function pe(e){if(isNaN(e)||!isFinite(e))return Sn;if(0>e)return Rt(pe(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ko;return new tt(t,0)}function Sf(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Rt(Sf(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=pe(Math.pow(t,8)),r=Sn,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=pe(Math.pow(t,i)),r=r.R(i).add(pe(o))):(r=r.R(n),r=r.add(pe(o)))}return r}var Ko=4294967296,Sn=Ga(0),Go=Ga(1),bc=Ga(16777216);R=tt.prototype;R.ea=function(){if(Wt(this))return-Rt(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ko+r)*t,t*=Ko}return e};R.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Te(this))return"0";if(Wt(this))return"-"+Rt(this).toString(e);for(var t=pe(Math.pow(e,6)),n=this,r="";;){var s=Gs(n,t).g;n=Ks(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,Te(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};R.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Te(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Wt(e){return e.h==-1}R.X=function(e){return e=Ks(this,e),Wt(e)?-1:Te(e)?0:1};function Rt(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new tt(n,~e.h).add(Go)}R.abs=function(){return Wt(this)?Rt(this):this};R.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new tt(n,n[n.length-1]&-2147483648?-1:0)};function Ks(e,t){return e.add(Rt(t))}R.R=function(e){if(Te(this)||Te(e))return Sn;if(Wt(this))return Wt(e)?Rt(this).R(Rt(e)):Rt(Rt(this).R(e));if(Wt(e))return Rt(this.R(Rt(e)));if(0>this.X(bc)&&0>e.X(bc))return pe(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,l=e.D(s)&65535;n[2*r+2*s]+=o*l,ms(n,2*r+2*s),n[2*r+2*s+1]+=i*l,ms(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,ms(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,ms(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new tt(n,0)};function ms(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function tr(e,t){this.g=e,this.h=t}function Gs(e,t){if(Te(t))throw Error("division by zero");if(Te(e))return new tr(Sn,Sn);if(Wt(e))return t=Gs(Rt(e),t),new tr(Rt(t.g),Rt(t.h));if(Wt(t))return t=Gs(e,Rt(t)),new tr(Rt(t.g),t.h);if(30<e.g.length){if(Wt(e)||Wt(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Go,r=t;0>=r.X(e);)n=Vc(n),r=Vc(r);var s=mn(n,1),i=mn(r,1);for(r=mn(r,2),n=mn(n,2);!Te(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=mn(r,1),n=mn(n,1)}return t=Ks(e,s.R(t)),new tr(s,t)}for(s=Sn;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=pe(n),o=i.R(t);Wt(o)||0<o.X(e);)n-=r,i=pe(n),o=i.R(t);Te(i)&&(i=Go),s=s.add(i),e=Ks(e,o)}return new tr(s,e)}R.gb=function(e){return Gs(this,e).h};R.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new tt(n,this.h&e.h)};R.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new tt(n,this.h|e.h)};R.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new tt(n,this.h^e.h)};function Vc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new tt(n,e.h)}function mn(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new tt(s,e.h)}zs.prototype.createWebChannel=zs.prototype.g;Gt.prototype.send=Gt.prototype.u;Gt.prototype.open=Gt.prototype.m;Gt.prototype.close=Gt.prototype.close;wi.NO_ERROR=0;wi.TIMEOUT=8;wi.HTTP_ERROR=6;$h.COMPLETE="complete";qh.EventType=Hr;Hr.OPEN="a";Hr.CLOSE="b";Hr.ERROR="c";Hr.MESSAGE="d";vt.prototype.listen=vt.prototype.O;ft.prototype.listenOnce=ft.prototype.P;ft.prototype.getLastError=ft.prototype.Sa;ft.prototype.getLastErrorCode=ft.prototype.Ia;ft.prototype.getStatus=ft.prototype.da;ft.prototype.getResponseJson=ft.prototype.Wa;ft.prototype.getResponseText=ft.prototype.ja;ft.prototype.send=ft.prototype.ha;ft.prototype.setWithCredentials=ft.prototype.Oa;ie.prototype.digest=ie.prototype.l;ie.prototype.reset=ie.prototype.reset;ie.prototype.update=ie.prototype.j;tt.prototype.add=tt.prototype.add;tt.prototype.multiply=tt.prototype.R;tt.prototype.modulo=tt.prototype.gb;tt.prototype.compare=tt.prototype.X;tt.prototype.toNumber=tt.prototype.ea;tt.prototype.toString=tt.prototype.toString;tt.prototype.getBits=tt.prototype.D;tt.fromNumber=pe;tt.fromString=Sf;var nE=function(){return new zs},rE=function(){return Ii()},ho=wi,sE=$h,iE=fn,Dc={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},oE=Gr,_s=qh,aE=ft,lE=ie,Pn=tt;const xc="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qn="10.11.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln=new yh("@firebase/firestore");function er(){return ln.logLevel}function b(e,...t){if(ln.logLevel<=Y.DEBUG){const n=t.map(Wa);ln.debug(`Firestore (${qn}): ${e}`,...n)}}function Re(e,...t){if(ln.logLevel<=Y.ERROR){const n=t.map(Wa);ln.error(`Firestore (${qn}): ${e}`,...n)}}function xn(e,...t){if(ln.logLevel<=Y.WARN){const n=t.map(Wa);ln.warn(`Firestore (${qn}): ${e}`,...n)}}function Wa(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(e="Unexpected state"){const t=`FIRESTORE (${qn}) INTERNAL ASSERTION FAILED: `+e;throw Re(t),new Error(t)}function st(e,t){e||k()}function j(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class N extends Bn{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class cE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class uE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hE{constructor(t){this.t=t,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Le;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Le,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{b("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(b("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Le)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(b("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string"),new Pf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return st(t===null||typeof t=="string"),new Dt(t)}}class fE{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dE{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new fE(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gE{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&b("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,b("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{b("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):b("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(st(typeof n.token=="string"),this.R=n.token,new pE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=mE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function J(e,t){return e<t?-1:e>t?1:0}function Nn(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new N(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new N(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new N(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new N(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return mt.fromMillis(Date.now())}static fromDate(t){return mt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?J(this.nanoseconds,t.nanoseconds):J(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(t){this.timestamp=t}static fromTimestamp(t){return new B(t)}static min(){return new B(new mt(0,0))}static max(){return new B(new mt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t,n,r){n===void 0?n=0:n>t.length&&k(),r===void 0?r=t.length-n:r>t.length-n&&k(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return kr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof kr?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class lt extends kr{construct(t,n,r){return new lt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new N(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new lt(n)}static emptyPath(){return new lt([])}}const _E=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends kr{construct(t,n,r){return new St(t,n,r)}static isValidIdentifier(t){return _E.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new N(v.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new N(v.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new N(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new N(v.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(t){this.path=t}static fromPath(t){return new O(lt.fromString(t))}static fromName(t){return new O(lt.fromString(t).popFirst(5))}static empty(){return new O(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&lt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return lt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new O(new lt(t.slice()))}}function yE(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=B.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new Be(s,O.empty(),t)}function EE(e){return new Be(e.readTime,e.key,-1)}class Be{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Be(B.min(),O.empty(),-1)}static max(){return new Be(B.max(),O.empty(),-1)}}function vE(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=O.comparator(e.documentKey,t.documentKey),n!==0?n:J(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xr(e){if(e.code!==v.FAILED_PRECONDITION||e.message!==TE)throw e;b("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&k(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new E((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):E.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):E.reject(n)}static resolve(t){return new E((n,r)=>{n(t)})}static reject(t){return new E((n,r)=>{r(t)})}static waitFor(t){return new E((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(t){let n=E.resolve(!1);for(const r of t)n=n.next(s=>s?E.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new E((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new E((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function wE(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Qa.oe=-1;function Di(e){return e==null}function Ws(e){return e===0&&1/e==-1/0}function AE(e){return typeof e=="number"&&Number.isInteger(e)&&!Ws(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Hn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t,n){this.comparator=t,this.root=n||wt.EMPTY}insert(t,n){return new ht(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(t){return new ht(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ys(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ys(this.root,t,this.comparator,!1)}getReverseIterator(){return new ys(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ys(this.root,t,this.comparator,!0)}}class ys{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class wt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??wt.RED,this.left=s??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new wt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw k();const t=this.left.check();if(t!==this.right.check())throw k();return t+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw k()}get value(){throw k()}get color(){throw k()}get left(){throw k()}get right(){throw k()}copy(t,n,r,s,i){return this}insert(t,n,r){return new wt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t){this.comparator=t,this.data=new ht(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Oc(this.data.getIterator())}getIteratorFrom(t){return new Oc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ct)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ct(this.comparator);return n.data=t,n}}class Oc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.fields=t,t.sort(St.comparator)}static empty(){return new ne([])}unionWith(t){let n=new Ct(St.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new ne(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Nn(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Vf("Invalid base64 string: "+i):i}}(t);return new kt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new kt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return J(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const RE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function je(e){if(st(!!e),typeof e=="string"){let t=0;const n=RE.exec(e);if(st(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:pt(e.seconds),nanos:pt(e.nanos)}}function pt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function cn(e){return typeof e=="string"?kt.fromBase64String(e):kt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ya(e){const t=e.mapValue.fields.__previous_value__;return Xa(t)?Ya(t):t}function Lr(e){const t=je(e.mapValue.fields.__local_write_time__.timestampValue);return new mt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(t,n,r,s,i,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Fr{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Fr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Fr&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function un(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xa(e)?4:PE(e)?9007199254740991:10:k()}function ye(e,t){if(e===t)return!0;const n=un(e);if(n!==un(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Lr(e).isEqual(Lr(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=je(s.timestampValue),a=je(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return cn(s.bytesValue).isEqual(cn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return pt(s.geoPointValue.latitude)===pt(i.geoPointValue.latitude)&&pt(s.geoPointValue.longitude)===pt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return pt(s.integerValue)===pt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=pt(s.doubleValue),a=pt(i.doubleValue);return o===a?Ws(o)===Ws(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Nn(e.arrayValue.values||[],t.arrayValue.values||[],ye);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Nc(o)!==Nc(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ye(o[l],a[l])))return!1;return!0}(e,t);default:return k()}}function Ur(e,t){return(e.values||[]).find(n=>ye(n,t))!==void 0}function On(e,t){if(e===t)return 0;const n=un(e),r=un(t);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=pt(i.integerValue||i.doubleValue),l=pt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Mc(e.timestampValue,t.timestampValue);case 4:return Mc(Lr(e),Lr(t));case 5:return J(e.stringValue,t.stringValue);case 6:return function(i,o){const a=cn(i),l=cn(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=J(a[c],l[c]);if(u!==0)return u}return J(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=J(pt(i.latitude),pt(o.latitude));return a!==0?a:J(pt(i.longitude),pt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=On(a[c],l[c]);if(u)return u}return J(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===Es.mapValue&&o===Es.mapValue)return 0;if(i===Es.mapValue)return 1;if(o===Es.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=J(l[f],u[f]);if(p!==0)return p;const g=On(a[l[f]],c[u[f]]);if(g!==0)return g}return J(l.length,u.length)}(e.mapValue,t.mapValue);default:throw k()}}function Mc(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return J(e,t);const n=je(e),r=je(t),s=J(n.seconds,r.seconds);return s!==0?s:J(n.nanos,r.nanos)}function Mn(e){return Wo(e)}function Wo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=je(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return cn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return O.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Wo(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Wo(n.fields[o])}`;return s+"}"}(e.mapValue):k()}function Qo(e){return!!e&&"integerValue"in e}function Ja(e){return!!e&&"arrayValue"in e}function kc(e){return!!e&&"nullValue"in e}function Lc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function bs(e){return!!e&&"mapValue"in e}function gr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Hn(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=gr(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function PE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t){this.value=t}static empty(){return new Qt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!bs(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=gr(n)}setAll(t){let n=St.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=gr(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());bs(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ye(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];bs(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Hn(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Qt(gr(this.value))}}function Df(e){const t=[];return Hn(e.fields,(n,r)=>{const s=new St([n]);if(bs(r)){const i=Df(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)}),new ne(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new xt(t,0,B.min(),B.min(),B.min(),Qt.empty(),0)}static newFoundDocument(t,n,r,s){return new xt(t,1,n,B.min(),r,s,0)}static newNoDocument(t,n){return new xt(t,2,n,B.min(),B.min(),Qt.empty(),0)}static newUnknownDocument(t,n){return new xt(t,3,n,B.min(),B.min(),Qt.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(B.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof xt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t,n){this.position=t,this.inclusive=n}}function Fc(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=O.comparator(O.fromName(o.referenceValue),n.key):r=On(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Uc(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ye(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(t,n="asc"){this.field=t,this.dir=n}}function CE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{}class gt extends xf{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new VE(t,n,r):n==="array-contains"?new NE(t,r):n==="in"?new OE(t,r):n==="not-in"?new ME(t,r):n==="array-contains-any"?new kE(t,r):new gt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new DE(t,r):new xE(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(On(n,this.value)):n!==null&&un(this.value)===un(n)&&this.matchesComparison(On(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return k()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ee extends xf{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Ee(t,n)}matches(t){return Nf(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Nf(e){return e.op==="and"}function Of(e){return bE(e)&&Nf(e)}function bE(e){for(const t of e.filters)if(t instanceof Ee)return!1;return!0}function Xo(e){if(e instanceof gt)return e.field.canonicalString()+e.op.toString()+Mn(e.value);if(Of(e))return e.filters.map(t=>Xo(t)).join(",");{const t=e.filters.map(n=>Xo(n)).join(",");return`${e.op}(${t})`}}function Mf(e,t){return e instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.field.isEqual(s.field)&&ye(r.value,s.value)}(e,t):e instanceof Ee?function(r,s){return s instanceof Ee&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Mf(o,s.filters[a]),!0):!1}(e,t):void k()}function kf(e){return e instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${Mn(n.value)}`}(e):e instanceof Ee?function(n){return n.op.toString()+" {"+n.getFilters().map(kf).join(" ,")+"}"}(e):"Filter"}class VE extends gt{constructor(t,n,r){super(t,n,r),this.key=O.fromName(r.referenceValue)}matches(t){const n=O.comparator(t.key,this.key);return this.matchesComparison(n)}}class DE extends gt{constructor(t,n){super(t,"in",n),this.keys=Lf("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class xE extends gt{constructor(t,n){super(t,"not-in",n),this.keys=Lf("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Lf(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>O.fromName(r.referenceValue))}class NE extends gt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Ja(n)&&Ur(n.arrayValue,this.value)}}class OE extends gt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ur(this.value.arrayValue,n)}}class ME extends gt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ur(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Ur(this.value.arrayValue,n)}}class kE extends gt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Ja(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ur(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function Bc(e,t=null,n=[],r=[],s=null,i=null,o=null){return new LE(e,t,n,r,s,i,o)}function Za(e){const t=j(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Xo(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Di(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Mn(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Mn(r)).join(",")),t.ue=n}return t.ue}function tl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!CE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Mf(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Uc(e.startAt,t.startAt)&&Uc(e.endAt,t.endAt)}function Yo(e){return O.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FE(e,t,n,r,s,i,o,a){return new xi(e,t,n,r,s,i,o,a)}function Ff(e){return new xi(e)}function jc(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function UE(e){return e.collectionGroup!==null}function mr(e){const t=j(e);if(t.ce===null){t.ce=[];const n=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ct(St.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.ce.push(new Xs(i,r))}),n.has(St.keyField().canonicalString())||t.ce.push(new Xs(St.keyField(),r))}return t.ce}function me(e){const t=j(e);return t.le||(t.le=BE(t,mr(e))),t.le}function BE(e,t){if(e.limitType==="F")return Bc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Xs(s.field,i)});const n=e.endAt?new Qs(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Qs(e.startAt.position,e.startAt.inclusive):null;return Bc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Jo(e,t,n){return new xi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ni(e,t){return tl(me(e),me(t))&&e.limitType===t.limitType}function Uf(e){return`${Za(me(e))}|lt:${e.limitType}`}function yn(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>kf(s)).join(", ")}]`),Di(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Mn(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Mn(s)).join(",")),`Target(${r})`}(me(e))}; limitType=${e.limitType})`}function Oi(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):O.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of mr(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Fc(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,mr(r),s)||r.endAt&&!function(o,a,l){const c=Fc(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,mr(r),s))}(e,t)}function jE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bf(e){return(t,n)=>{let r=!1;for(const s of mr(e)){const i=$E(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function $E(e,t,n){const r=e.field.isKeyField()?O.comparator(t.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?On(l,c):k()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return k()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Hn(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return bf(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=new ht(O.comparator);function Se(){return qE}const jf=new ht(O.comparator);function ir(...e){let t=jf;for(const n of e)t=t.insert(n.key,n);return t}function $f(e){let t=jf;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function nn(){return _r()}function qf(){return _r()}function _r(){return new zn(e=>e.toString(),(e,t)=>e.isEqual(t))}const HE=new ht(O.comparator),zE=new Ct(O.comparator);function G(...e){let t=zE;for(const n of e)t=t.add(n);return t}const KE=new Ct(J);function GE(){return KE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ws(t)?"-0":t}}function zf(e){return{integerValue:""+e}}function WE(e,t){return AE(t)?zf(t):Hf(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this._=void 0}}function QE(e,t,n){return e instanceof Ys?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Xa(i)&&(i=Ya(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof Br?Gf(e,t):e instanceof jr?Wf(e,t):function(s,i){const o=Kf(s,i),a=$c(o)+$c(s.Pe);return Qo(o)&&Qo(s.Pe)?zf(a):Hf(s.serializer,a)}(e,t)}function XE(e,t,n){return e instanceof Br?Gf(e,t):e instanceof jr?Wf(e,t):n}function Kf(e,t){return e instanceof Js?function(r){return Qo(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Ys extends Mi{}class Br extends Mi{constructor(t){super(),this.elements=t}}function Gf(e,t){const n=Qf(t);for(const r of e.elements)n.some(s=>ye(s,r))||n.push(r);return{arrayValue:{values:n}}}class jr extends Mi{constructor(t){super(),this.elements=t}}function Wf(e,t){let n=Qf(t);for(const r of e.elements)n=n.filter(s=>!ye(s,r));return{arrayValue:{values:n}}}class Js extends Mi{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function $c(e){return pt(e.integerValue||e.doubleValue)}function Qf(e){return Ja(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function YE(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof Br&&s instanceof Br||r instanceof jr&&s instanceof jr?Nn(r.elements,s.elements,ye):r instanceof Js&&s instanceof Js?ye(r.Pe,s.Pe):r instanceof Ys&&s instanceof Ys}(e.transform,t.transform)}class JE{constructor(t,n){this.version=t,this.transformResults=n}}class we{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new we}static exists(t){return new we(void 0,t)}static updateTime(t){return new we(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Vs(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class ki{}function Xf(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Jf(e.key,we.none()):new Jr(e.key,e.data,we.none());{const n=e.data,r=Qt.empty();let s=new Ct(St.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new dn(e.key,r,new ne(s.toArray()),we.none())}}function ZE(e,t,n){e instanceof Jr?function(s,i,o){const a=s.value.clone(),l=Hc(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof dn?function(s,i,o){if(!Vs(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Hc(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Yf(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function yr(e,t,n,r){return e instanceof Jr?function(i,o,a,l){if(!Vs(i.precondition,o))return a;const c=i.value.clone(),u=zc(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof dn?function(i,o,a,l){if(!Vs(i.precondition,o))return a;const c=zc(i.fieldTransforms,l,o),u=o.data;return u.setAll(Yf(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(i,o,a){return Vs(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function tv(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=Kf(r.transform,s||null);i!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,i))}return n||null}function qc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Nn(r,s,(i,o)=>YE(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Jr extends ki{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class dn extends ki{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Yf(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Hc(e,t,n){const r=new Map;st(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,XE(o,a,n[s]))}return r}function zc(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,QE(i,o,t))}return r}class Jf extends ki{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ev extends ki{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&ZE(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=yr(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=yr(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=qf();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Xf(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(B.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),G())}isEqual(t){return this.batchId===t.batchId&&Nn(this.mutations,t.mutations,(n,r)=>qc(n,r))&&Nn(this.baseMutations,t.baseMutations,(n,r)=>qc(n,r))}}class el{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){st(t.mutations.length===r.length);let s=function(){return HE}();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new el(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Q;function iv(e){switch(e){default:return k();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function Zf(e){if(e===void 0)return Re("GRPC error has no .code"),v.UNKNOWN;switch(e){case dt.OK:return v.OK;case dt.CANCELLED:return v.CANCELLED;case dt.UNKNOWN:return v.UNKNOWN;case dt.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case dt.INTERNAL:return v.INTERNAL;case dt.UNAVAILABLE:return v.UNAVAILABLE;case dt.UNAUTHENTICATED:return v.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case dt.NOT_FOUND:return v.NOT_FOUND;case dt.ALREADY_EXISTS:return v.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return v.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case dt.ABORTED:return v.ABORTED;case dt.OUT_OF_RANGE:return v.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return v.UNIMPLEMENTED;case dt.DATA_LOSS:return v.DATA_LOSS;default:return k()}}(Q=dt||(dt={}))[Q.OK=0]="OK",Q[Q.CANCELLED=1]="CANCELLED",Q[Q.UNKNOWN=2]="UNKNOWN",Q[Q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Q[Q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Q[Q.NOT_FOUND=5]="NOT_FOUND",Q[Q.ALREADY_EXISTS=6]="ALREADY_EXISTS",Q[Q.PERMISSION_DENIED=7]="PERMISSION_DENIED",Q[Q.UNAUTHENTICATED=16]="UNAUTHENTICATED",Q[Q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Q[Q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Q[Q.ABORTED=10]="ABORTED",Q[Q.OUT_OF_RANGE=11]="OUT_OF_RANGE",Q[Q.UNIMPLEMENTED=12]="UNIMPLEMENTED",Q[Q.INTERNAL=13]="INTERNAL",Q[Q.UNAVAILABLE=14]="UNAVAILABLE",Q[Q.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Pn([4294967295,4294967295],0);function Kc(e){const t=ov().encode(e),n=new lE;return n.update(t),new Uint8Array(n.digest())}function Gc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Pn([n,r],0),new Pn([s,i],0)]}class nl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new or(`Invalid padding: ${n}`);if(r<0)throw new or(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new or(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new or(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Pn.fromNumber(this.Ie)}Ee(t,n,r){let s=t.add(n.multiply(Pn.fromNumber(r)));return s.compare(av)===1&&(s=new Pn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Kc(t),[r,s]=Gc(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new nl(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Kc(t),[r,s]=Gc(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class or extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Zr.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Li(B.min(),s,new ht(J),Se(),G())}}class Zr{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Zr(r,n,G(),G(),G())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t,n,r,s){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=s}}class td{constructor(t,n){this.targetId=t,this.me=n}}class ed{constructor(t,n,r=kt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Wc{constructor(){this.fe=0,this.ge=Xc(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=G(),n=G(),r=G();return this.ge.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:k()}}),new Zr(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Xc()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,st(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lv{constructor(t){this.Le=t,this.Be=new Map,this.ke=Se(),this.qe=Qc(),this.Qe=new ht(J)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:k()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(t){const n=t.targetId,r=t.me.count,s=this.Je(n);if(s){const i=s.target;if(Yo(i))if(r===0){const o=new O(i.path);this.Ue(n,o,xt.newNoDocument(o,B.min()))}else st(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),l=a?this.Xe(a,t,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=cn(r).toUint8Array()}catch(l){if(l instanceof Vf)return xn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new nl(o,s,i)}catch(l){return xn(l instanceof or?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(t){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Yo(a.target)){const l=new O(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,xt.newNoDocument(l,t))}i.be&&(n.set(o,i.Ce()),i.ve())}});let r=G();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(t));const s=new Li(t,n,this.Qe,this.ke,r);return this.ke=Se(),this.qe=Qc(),this.Qe=new ht(J),s}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const s=this.Ge(t);this.it(t,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Wc,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Ct(J),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||b("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Wc),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Qc(){return new ht(O.comparator)}function Xc(){return new ht(O.comparator)}const cv={asc:"ASCENDING",desc:"DESCENDING"},uv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hv={and:"AND",or:"OR"};class fv{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Zo(e,t){return e.useProto3Json||Di(t)?t:{value:t}}function Zs(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function nd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function dv(e,t){return Zs(e,t.toTimestamp())}function _e(e){return st(!!e),B.fromTimestamp(function(n){const r=je(n);return new mt(r.seconds,r.nanos)}(e))}function rl(e,t){return ta(e,t).canonicalString()}function ta(e,t){const n=function(s){return new lt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function rd(e){const t=lt.fromString(e);return st(ld(t)),t}function ea(e,t){return rl(e.databaseId,t.path)}function fo(e,t){const n=rd(t);if(n.get(1)!==e.databaseId.projectId)throw new N(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new N(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new O(id(n))}function sd(e,t){return rl(e.databaseId,t)}function pv(e){const t=rd(e);return t.length===4?lt.emptyPath():id(t)}function na(e){return new lt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function id(e){return st(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Yc(e,t,n){return{name:ea(e,t),fields:n.value.mapValue.fields}}function gv(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:k()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(st(u===void 0||typeof u=="string"),kt.fromBase64String(u||"")):(st(u===void 0||u instanceof Buffer||u instanceof Uint8Array),kt.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?v.UNKNOWN:Zf(c.code);return new N(u,c.message||"")}(o);n=new ed(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=fo(e,r.document.name),i=_e(r.document.updateTime),o=r.document.createTime?_e(r.document.createTime):B.min(),a=new Qt({mapValue:{fields:r.document.fields}}),l=xt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ds(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=fo(e,r.document),i=r.readTime?_e(r.readTime):B.min(),o=xt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ds([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=fo(e,r.document),i=r.removedTargetIds||[];n=new Ds([],i,s,null)}else{if(!("filter"in t))return k();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new sv(s,i),a=r.targetId;n=new td(a,o)}}return n}function mv(e,t){let n;if(t instanceof Jr)n={update:Yc(e,t.key,t.value)};else if(t instanceof Jf)n={delete:ea(e,t.key)};else if(t instanceof dn)n={update:Yc(e,t.key,t.data),updateMask:Rv(t.fieldMask)};else{if(!(t instanceof ev))return k();n={verify:ea(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ys)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Br)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Js)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw k()}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:dv(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:k()}(e,t.precondition)),n}function _v(e,t){return e&&e.length>0?(st(t!==void 0),e.map(n=>function(s,i){let o=s.updateTime?_e(s.updateTime):_e(i);return o.isEqual(B.min())&&(o=_e(i)),new JE(o,s.transformResults||[])}(n,t))):[]}function yv(e,t){return{documents:[sd(e,t.path)]}}function Ev(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sd(e,s);const i=function(c){if(c.length!==0)return ad(Ee.create(c,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:En(p.field),direction:Iv(p.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Zo(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:n,parent:s}}function vv(e){let t=pv(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){st(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(f){const p=od(f);return p instanceof Ee&&Of(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(D){return new Xs(vn(D.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Di(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,g=f.values||[];return new Qs(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Qs(g,p)}(n.endAt)),FE(t,s,o,i,a,"F",l,c)}function Tv(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return k()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function od(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vn(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=vn(n.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=vn(n.unaryFilter.field);return gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vn(n.unaryFilter.field);return gt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return k()}}(e):e.fieldFilter!==void 0?function(n){return gt.create(vn(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return k()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Ee.create(n.compositeFilter.filters.map(r=>od(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return k()}}(n.compositeFilter.op))}(e):k()}function Iv(e){return cv[e]}function wv(e){return uv[e]}function Av(e){return hv[e]}function En(e){return{fieldPath:e.canonicalString()}}function vn(e){return St.fromServerFormat(e.fieldPath)}function ad(e){return e instanceof gt?function(n){if(n.op==="=="){if(Lc(n.value))return{unaryFilter:{field:En(n.field),op:"IS_NAN"}};if(kc(n.value))return{unaryFilter:{field:En(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lc(n.value))return{unaryFilter:{field:En(n.field),op:"IS_NOT_NAN"}};if(kc(n.value))return{unaryFilter:{field:En(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:En(n.field),op:wv(n.op),value:n.value}}}(e):e instanceof Ee?function(n){const r=n.getFilters().map(s=>ad(s));return r.length===1?r[0]:{compositeFilter:{op:Av(n.op),filters:r}}}(e):k()}function Rv(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function ld(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t,n,r,s,i=B.min(),o=B.min(),a=kt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new xe(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new xe(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new xe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new xe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(t){this.ut=t}}function Pv(e){const t=vv({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Jo(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.on=new bv}addToCollectionParentIndex(t,n){return this.on.add(n),E.resolve()}getCollectionParents(t,n){return E.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return E.resolve()}deleteFieldIndex(t,n){return E.resolve()}deleteAllFieldIndexes(t){return E.resolve()}createTargetIndexes(t,n){return E.resolve()}getDocumentsMatchingTarget(t,n){return E.resolve(null)}getIndexType(t,n){return E.resolve(0)}getFieldIndexes(t,n){return E.resolve([])}getNextCollectionGroupToUpdate(t){return E.resolve(null)}getMinOffset(t,n){return E.resolve(Be.min())}getMinOffsetFromCollectionGroup(t,n){return E.resolve(Be.min())}updateCollectionGroup(t,n,r){return E.resolve()}updateIndexEntries(t,n){return E.resolve()}}class bv{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Ct(lt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ct(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new kn(0)}static Nn(){return new kn(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.changes=new zn(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,xt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?E.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&yr(r.mutation,s,ne.empty(),mt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,G()).next(()=>r))}getLocalViewOfDocuments(t,n,r=G()){const s=nn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=ir();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=nn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,G()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=Se();const o=_r(),a=function(){return _r()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof dn)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),yr(u.mutation,c,u.mutation.getFieldMask(),mt.now())):o.set(c.key,ne.empty())}),this.recalculateAndSaveOverlays(t,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new Dv(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=_r();let s=new ht((o,a)=>o-a),i=G();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||ne.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(s.get(a.batchId)||G()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=qf();u.forEach(p=>{if(!i.has(p)){const g=Xf(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,f))}return E.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(o){return O.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):UE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):E.resolve(nn());let a=-1,l=i;return o.next(c=>E.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?E.resolve():this.remoteDocumentCache.getEntry(t,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(t,c,i)).next(()=>this.computeViews(t,l,c,G())).next(u=>({batchId:a,changes:$f(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new O(n)).next(r=>{let s=ir();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let o=ir();return this.indexManager.getCollectionParents(t,i).next(a=>E.forEach(a,l=>{const c=function(f,p){return new xi(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(t,c,r,s).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,xt.newInvalidDocument(u)))});let a=ir();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&yr(u.mutation,c,ne.empty(),mt.now()),Oi(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return E.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_e(s.createTime)}}(n)),E.resolve()}getNamedQuery(t,n){return E.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(s){return{name:s.name,query:Pv(s.bundledQuery),readTime:_e(s.readTime)}}(n)),E.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.overlays=new ht(O.comparator),this.lr=new Map}getOverlay(t,n){return E.resolve(this.overlays.get(n))}getOverlays(t,n){const r=nn();return E.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.lt(t,n,i)}),E.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.lr.delete(r)),E.resolve()}getOverlaysForCollection(t,n,r){const s=nn(),i=n.length+1,o=new O(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return E.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new ht((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=nn(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=nn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return E.resolve(a)}lt(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.lr.get(s.largestBatchId).delete(r.key);this.lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rv(n,r));let i=this.lr.get(n);i===void 0&&(i=G(),this.lr.set(n,i)),this.lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(){this.hr=new Ct(Et.Pr),this.Ir=new Ct(Et.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){const r=new Et(t,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.dr(new Et(t,n))}Ar(t,n){t.forEach(r=>this.removeReference(r,n))}Rr(t){const n=new O(new lt([])),r=new Et(n,t),s=new Et(n,t+1),i=[];return this.Ir.forEachInRange([r,s],o=>{this.dr(o),i.push(o.key)}),i}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const n=new O(new lt([])),r=new Et(n,t),s=new Et(n,t+1);let i=G();return this.Ir.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new Et(t,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Et{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return O.comparator(t.key,n.key)||J(t.gr,n.gr)}static Tr(t,n){return J(t.gr,n.gr)||O.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ct(Et.Pr)}checkEmpty(t){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nv(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.yr=this.yr.add(new Et(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(t,n){return E.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.Sr(r),i=s<0?0:s;return E.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Et(n,0),s=new Et(n,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([r,s],o=>{const a=this.wr(o.gr);i.push(a)}),E.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ct(J);return n.forEach(s=>{const i=new Et(s,0),o=new Et(s,Number.POSITIVE_INFINITY);this.yr.forEachInRange([i,o],a=>{r=r.add(a.gr)})}),E.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;O.isDocumentKey(i)||(i=i.child(""));const o=new Et(new O(i),0);let a=new Ct(J);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.gr)),!0)},o),E.resolve(this.br(a))}br(t){const n=[];return t.forEach(r=>{const s=this.wr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){st(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return E.forEach(n.mutations,s=>{const i=new Et(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.yr=r})}Fn(t){}containsKey(t,n){const r=new Et(n,0),s=this.yr.firstAfterOrEqual(r);return E.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,E.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t){this.Cr=t,this.docs=function(){return new ht(O.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return E.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(t,n){let r=Se();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():xt.newInvalidDocument(s))}),E.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=Se();const o=n.path,a=new O(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||vE(EE(u),r)<=0||(s.has(u.key)||Oi(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return E.resolve(i)}getAllFromCollectionGroup(t,n,r,s){k()}vr(t,n){return E.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Lv(this)}getSize(t){return E.resolve(this.size)}}class Lv extends Vv{constructor(t){super(),this._r=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this._r.addEntry(t,s)):this._r.removeEntry(r)}),E.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t){this.persistence=t,this.Fr=new zn(n=>Za(n),tl),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.Mr=0,this.Or=new sl,this.targetCount=0,this.Nr=kn.On()}forEachTarget(t,n){return this.Fr.forEach((r,s)=>n(s)),E.resolve()}getLastRemoteSnapshotVersion(t){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return E.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),E.resolve()}kn(t){this.Fr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Nr=new kn(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,E.resolve()}updateTargetData(t,n){return this.kn(n),E.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),E.waitFor(i).next(()=>s)}getTargetCount(t){return E.resolve(this.targetCount)}getTargetData(t,n){const r=this.Fr.get(n)||null;return E.resolve(r)}addMatchingKeys(t,n,r){return this.Or.Er(n,r),E.resolve()}removeMatchingKeys(t,n,r){this.Or.Ar(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),E.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),E.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Or.mr(n);return E.resolve(r)}containsKey(t,n){return E.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(t,n){this.Lr={},this.overlays={},this.Br=new Qa(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new Fv(this),this.indexManager=new Cv,this.remoteDocumentCache=function(s){return new kv(s)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new Sv(n),this.Kr=new Nv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Ov,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Lr[t.toKey()];return r||(r=new Mv(n,this.referenceDelegate),this.Lr[t.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,r){b("MemoryPersistence","Starting transaction:",t);const s=new Bv(this.Br.next());return this.referenceDelegate.$r(),r(s).next(i=>this.referenceDelegate.Ur(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Wr(t,n){return E.or(Object.values(this.Lr).map(r=>()=>r.containsKey(t,n)))}}class Bv extends IE{constructor(t){super(),this.currentSequenceNumber=t}}class il{constructor(t){this.persistence=t,this.Gr=new sl,this.zr=null}static jr(t){return new il(t)}get Hr(){if(this.zr)return this.zr;throw k()}addReference(t,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),E.resolve()}removeReference(t,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),E.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),E.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(s=>this.Hr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Hr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Hr,r=>{const s=O.fromPath(r);return this.Jr(t,s).next(i=>{i||n.removeEntry(s,B.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return E.or([()=>E.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ki=r,this.qi=s}static Qi(t,n){let r=G(),s=G();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ol(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return Um()?8:wE(Lm())>0?6:4}()}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.zi(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ji(t,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new jv;return this.Hi(t,n,o).next(a=>{if(i.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>i.result)}Ji(t,n,r,s){return r.documentReadCount<this.Ui?(er()<=Y.DEBUG&&b("QueryEngine","SDK will not create cache indexes for query:",yn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),E.resolve()):(er()<=Y.DEBUG&&b("QueryEngine","Query:",yn(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Wi*s?(er()<=Y.DEBUG&&b("QueryEngine","The SDK decides to create cache indexes for query:",yn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,me(n))):E.resolve())}zi(t,n){if(jc(n))return E.resolve(null);let r=me(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Jo(n,null,"F"),r=me(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=G(...i);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.Yi(n,a);return this.Zi(n,c,o,l.readTime)?this.zi(t,Jo(n,null,"F")):this.Xi(t,c,n,l)}))})))}ji(t,n,r,s){return jc(n)||s.isEqual(B.min())?E.resolve(null):this.Gi.getDocuments(t,r).next(i=>{const o=this.Yi(n,i);return this.Zi(n,o,r,s)?E.resolve(null):(er()<=Y.DEBUG&&b("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yn(n)),this.Xi(t,o,n,yE(s,-1)).next(a=>a))})}Yi(t,n){let r=new Ct(Bf(t));return n.forEach((s,i)=>{Oi(t,i)&&(r=r.add(i))}),r}Zi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Hi(t,n,r){return er()<=Y.DEBUG&&b("QueryEngine","Using full collection scan to execute query:",yn(n)),this.Gi.getDocumentsMatchingQuery(t,n,Be.min(),r)}Xi(t,n,r,s){return this.Gi.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(t,n,r,s){this.persistence=t,this.es=n,this.serializer=s,this.ts=new ht(J),this.ns=new zn(i=>Za(i),tl),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xv(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}}function Hv(e,t,n,r){return new qv(e,t,n,r)}async function cd(e,t){const n=j(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.os(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=G();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})}function zv(e,t){const n=j(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,p=f.keys();let g=E.resolve();return p.forEach(D=>{g=g.next(()=>u.getEntry(l,D)).next(P=>{const V=c.docVersions.get(D);st(V!==null),P.version.compareTo(V)<0&&(f.applyToRemoteDocument(P,c),P.isValidDocument()&&(P.setReadTime(c.commitVersion),u.addEntry(P)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=G();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function ud(e){const t=j(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function Kv(e,t){const n=j(e),r=t.snapshotVersion;let s=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});s=n.ts;const a=[];t.targetChanges.forEach((u,f)=>{const p=s.get(f);if(!p)return;a.push(n.qr.removeMatchingKeys(i,u.removedDocuments,f).next(()=>n.qr.addMatchingKeys(i,u.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(f)!==null?g=g.withResumeToken(kt.EMPTY_BYTE_STRING,B.min()).withLastLimboFreeSnapshotVersion(B.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),s=s.insert(f,g),function(P,V,$){return P.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(p,g,u)&&a.push(n.qr.updateTargetData(i,g))});let l=Se(),c=G();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(Gv(i,o,t.documentUpdates).next(u=>{l=u.us,c=u.cs})),!r.isEqual(B.min())){const u=n.qr.getLastRemoteSnapshotVersion(i).next(f=>n.qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return E.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ts=s,i))}function Gv(e,t,n){let r=G(),s=G();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=Se();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(B.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):b("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:o,cs:s}})}function Wv(e,t){const n=j(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Qv(e,t){const n=j(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.qr.getTargetData(r,t).next(i=>i?(s=i,E.resolve(s)):n.qr.allocateTargetId(r).next(o=>(s=new xe(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(t,r.targetId)),r})}async function ra(e,t,n){const r=j(e),s=r.ts.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Yr(o))throw o;b("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ts=r.ts.remove(t),r.ns.delete(s.target)}function Jc(e,t,n){const r=j(e);let s=B.min(),i=G();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=j(l),p=f.ns.get(u);return p!==void 0?E.resolve(f.ts.get(p)):f.qr.getTargetData(c,u)}(r,o,me(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.es.getDocumentsMatchingQuery(o,t,n?s:B.min(),n?i:G())).next(a=>(Xv(r,jE(t),a),{documents:a,ls:i})))}function Xv(e,t,n){let r=e.rs.get(t)||B.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.rs.set(t,r)}class Zc{constructor(){this.activeTargetIds=GE()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Yv{constructor(){this.eo=new Zc,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,r){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new Zc,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){b("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){b("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vs=null;function po(){return vs===null?vs=function(){return 268435456+Math.round(2147483648*Math.random())}():vs++,"0x"+vs.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}Eo(t){this.Ao=t}onMessage(t){this.Ro=t}close(){this.lo()}send(t){this.co(t)}Vo(){this.Po()}mo(){this.To()}fo(t){this.Ao(t)}po(t){this.Ro(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class eT extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.yo=r+"://"+n.host,this.wo=`projects/${s}/databases/${i}`,this.So=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get bo(){return!1}Do(n,r,s,i,o){const a=po(),l=this.Co(n,r.toUriEncodedString());b("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(c,i,o),this.Fo(n,l,c,s).then(u=>(b("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw xn("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Mo(n,r,s,i,o,a){return this.Do(n,r,s,i,o)}vo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qn}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}Co(n,r){const s=Zv[n];return`${this.yo}/v1/${r}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Fo(t,n,r,s){const i=po();return new Promise((o,a)=>{const l=new aE;l.setWithCredentials(!0),l.listenOnce(sE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ho.NO_ERROR:const u=l.getResponseJson();b(Vt,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case ho.TIMEOUT:b(Vt,`RPC '${t}' ${i} timed out`),a(new N(v.DEADLINE_EXCEEDED,"Request time out"));break;case ho.HTTP_ERROR:const f=l.getStatus();if(b(Vt,`RPC '${t}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const D=function(V){const $=V.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf($)>=0?$:v.UNKNOWN}(g.status);a(new N(D,g.message))}else a(new N(v.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new N(v.UNAVAILABLE,"Connection failed."));break;default:k()}}finally{b(Vt,`RPC '${t}' ${i} completed.`)}});const c=JSON.stringify(s);b(Vt,`RPC '${t}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}xo(t,n,r){const s=po(),i=[this.yo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=nE(),a=rE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new oE({})),this.vo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");b(Vt,`Creating RPC '${t}' stream ${s}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,g=!1;const D=new tT({co:V=>{g?b(Vt,`Not sending because RPC '${t}' stream ${s} is closed:`,V):(p||(b(Vt,`Opening RPC '${t}' stream ${s} transport.`),f.open(),p=!0),b(Vt,`RPC '${t}' stream ${s} sending:`,V),f.send(V))},lo:()=>f.close()}),P=(V,$,W)=>{V.listen($,q=>{try{W(q)}catch(et){setTimeout(()=>{throw et},0)}})};return P(f,_s.EventType.OPEN,()=>{g||(b(Vt,`RPC '${t}' stream ${s} transport opened.`),D.Vo())}),P(f,_s.EventType.CLOSE,()=>{g||(g=!0,b(Vt,`RPC '${t}' stream ${s} transport closed`),D.fo())}),P(f,_s.EventType.ERROR,V=>{g||(g=!0,xn(Vt,`RPC '${t}' stream ${s} transport errored:`,V),D.fo(new N(v.UNAVAILABLE,"The operation could not be completed")))}),P(f,_s.EventType.MESSAGE,V=>{var $;if(!g){const W=V.data[0];st(!!W);const q=W,et=q.error||(($=q[0])===null||$===void 0?void 0:$.error);if(et){b(Vt,`RPC '${t}' stream ${s} received error:`,et);const It=et.status;let z=function(Gn){const oe=dt[Gn];if(oe!==void 0)return Zf(oe)}(It),jt=et.message;z===void 0&&(z=v.INTERNAL,jt="Unknown error status: "+It+" with message "+et.message),g=!0,D.fo(new N(z,jt)),f.close()}else b(Vt,`RPC '${t}' stream ${s} received:`,W),D.po(W)}}),P(a,iE.STAT_EVENT,V=>{V.stat===Dc.PROXY?b(Vt,`RPC '${t}' stream ${s} detected buffering proxy`):V.stat===Dc.NOPROXY&&b(Vt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{D.mo()},0),D}}function go(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(e){return new fv(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(t,n,r=1e3,s=1.5,i=6e4){this.si=t,this.timerId=n,this.Oo=r,this.No=s,this.Lo=i,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(t){this.cancel();const n=Math.floor(this.Bo+this.$o()),r=Math.max(0,Date.now()-this.qo),s=Math.max(0,n-r);s>0&&b("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.qo=Date.now(),t())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(t,n,r,s,i,o,a,l){this.si=t,this.Wo=r,this.Go=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new hd(t,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(t){this.i_(),this.stream.send(t)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(t,n){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,t!==4?this.Jo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(Re(n.toString()),Re("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Eo(n)}o_(){}auth(){this.state=1;const t=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.zo===n&&this.a_(r,s)},r=>{t(()=>{const s=new N(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.u_(s)})})}a_(t,n){const r=this.__(this.zo);this.stream=this.c_(t,n),this.stream.ho(()=>{r(()=>this.listener.ho())}),this.stream.Io(()=>{r(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(s=>{r(()=>this.u_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Xo(){this.state=5,this.Jo.Ko(async()=>{this.state=0,this.start()})}u_(t){return b("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}__(t){return n=>{this.si.enqueueAndForget(()=>this.zo===t?n():(b("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nT extends fd{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}c_(t,n){return this.connection.xo("Listen",t,n)}onMessage(t){this.Jo.reset();const n=gv(this.serializer,t),r=function(i){if(!("targetChange"in i))return B.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?B.min():o.readTime?_e(o.readTime):B.min()}(t);return this.listener.l_(n,r)}h_(t){const n={};n.database=na(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Yo(l)?{documents:yv(i,l)}:{query:Ev(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=nd(i,o.resumeToken);const c=Zo(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(B.min())>0){a.readTime=Zs(i,o.snapshotVersion.toTimestamp());const c=Zo(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const r=Tv(this.serializer,t);r&&(n.labels=r),this.r_(n)}P_(t){const n={};n.database=na(this.serializer),n.removeTarget=t,this.r_(n)}}class rT extends fd{constructor(t,n,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(t,n){return this.connection.xo("Write",t,n)}onMessage(t){if(st(!!t.streamToken),this.lastStreamToken=t.streamToken,this.I_){this.Jo.reset();const n=_v(t.writeResults,t.commitTime),r=_e(t.commitTime);return this.listener.d_(r,n)}return st(!t.writeResults||t.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){const t={};t.database=na(this.serializer),this.r_(t)}E_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>mv(this.serializer,r))};this.r_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.V_=!1}m_(){if(this.V_)throw new N(v.FAILED_PRECONDITION,"The client has already been terminated.")}Do(t,n,r,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Do(t,ta(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new N(v.UNKNOWN,i.toString())})}Mo(t,n,r,s,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(t,ta(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new N(v.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}}class iT{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Re(n),this.y_=!1):b("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.ro(o=>{r.enqueueAndForget(async()=>{pn(this)&&(b("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=j(l);c.M_.add(4),await ts(c),c.N_.set("Unknown"),c.M_.delete(4),await Ui(c)}(this))})}),this.N_=new iT(r,s)}}async function Ui(e){if(pn(e))for(const t of e.x_)await t(!0)}async function ts(e){for(const t of e.x_)await t(!1)}function dd(e,t){const n=j(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),ul(n)?cl(n):Kn(n).Zo()&&ll(n,t))}function al(e,t){const n=j(e),r=Kn(n);n.F_.delete(t),r.Zo()&&pd(n,t),n.F_.size===0&&(r.Zo()?r.t_():pn(n)&&n.N_.set("Unknown"))}function ll(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(B.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Kn(e).h_(t)}function pd(e,t){e.L_.xe(t),Kn(e).P_(t)}function cl(e){e.L_=new lv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Kn(e).start(),e.N_.w_()}function ul(e){return pn(e)&&!Kn(e).Yo()&&e.F_.size>0}function pn(e){return j(e).M_.size===0}function gd(e){e.L_=void 0}async function aT(e){e.N_.set("Online")}async function lT(e){e.F_.forEach((t,n)=>{ll(e,t)})}async function cT(e,t){gd(e),ul(e)?(e.N_.D_(t),cl(e)):e.N_.set("Unknown")}async function uT(e,t,n){if(e.N_.set("Online"),t instanceof ed&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.F_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.F_.delete(a),s.L_.removeTarget(a))}(e,t)}catch(r){b("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await ti(e,r)}else if(t instanceof Ds?e.L_.Ke(t):t instanceof td?e.L_.He(t):e.L_.We(t),!n.isEqual(B.min()))try{const r=await ud(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.F_.get(c);u&&i.F_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.F_.get(l);if(!u)return;i.F_.set(l,u.withResumeToken(kt.EMPTY_BYTE_STRING,u.snapshotVersion)),pd(i,l);const f=new xe(u.target,l,c,u.sequenceNumber);ll(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){b("RemoteStore","Failed to raise snapshot:",r),await ti(e,r)}}async function ti(e,t,n){if(!Yr(t))throw t;e.M_.add(1),await ts(e),e.N_.set("Offline"),n||(n=()=>ud(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{b("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Ui(e)})}function md(e,t){return t().catch(n=>ti(e,n,t))}async function Bi(e){const t=j(e),n=$e(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;hT(t);)try{const s=await Wv(t.localStore,r);if(s===null){t.v_.length===0&&n.t_();break}r=s.batchId,fT(t,s)}catch(s){await ti(t,s)}_d(t)&&yd(t)}function hT(e){return pn(e)&&e.v_.length<10}function fT(e,t){e.v_.push(t);const n=$e(e);n.Zo()&&n.T_&&n.E_(t.mutations)}function _d(e){return pn(e)&&!$e(e).Yo()&&e.v_.length>0}function yd(e){$e(e).start()}async function dT(e){$e(e).R_()}async function pT(e){const t=$e(e);for(const n of e.v_)t.E_(n.mutations)}async function gT(e,t,n){const r=e.v_.shift(),s=el.from(r,t,n);await md(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Bi(e)}async function mT(e,t){t&&$e(e).T_&&await async function(r,s){if(function(o){return iv(o)&&o!==v.ABORTED}(s.code)){const i=r.v_.shift();$e(r).e_(),await md(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bi(r)}}(e,t),_d(e)&&yd(e)}async function eu(e,t){const n=j(e);n.asyncQueue.verifyOperationInProgress(),b("RemoteStore","RemoteStore received new credentials");const r=pn(n);n.M_.add(3),await ts(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Ui(n)}async function _T(e,t){const n=j(e);t?(n.M_.delete(2),await Ui(n)):t||(n.M_.add(2),await ts(n),n.N_.set("Unknown"))}function Kn(e){return e.B_||(e.B_=function(n,r,s){const i=j(n);return i.m_(),new nT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{ho:aT.bind(null,e),Io:lT.bind(null,e),Eo:cT.bind(null,e),l_:uT.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.e_(),ul(e)?cl(e):e.N_.set("Unknown")):(await e.B_.stop(),gd(e))})),e.B_}function $e(e){return e.k_||(e.k_=function(n,r,s){const i=j(n);return i.m_(),new rT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{ho:()=>Promise.resolve(),Io:dT.bind(null,e),Eo:mT.bind(null,e),A_:pT.bind(null,e),d_:gT.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.e_(),await Bi(e)):(await e.k_.stop(),e.v_.length>0&&(b("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Le,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new hl(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new N(v.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fl(e,t){if(Re("AsyncQueue",`${t}: ${e}`),Yr(e))return new N(v.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.comparator=t?(n,r)=>t(n,r)||O.comparator(n.key,r.key):(n,r)=>O.comparator(n.key,r.key),this.keyedMap=ir(),this.sortedSet=new ht(this.comparator)}static emptySet(t){return new Cn(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Cn)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Cn;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this.q_=new ht(O.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):k():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Ln{constructor(t,n,r,s,i,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ln(t,n,Cn.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ni(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class ET{constructor(){this.queries=new zn(t=>Uf(t),Ni),this.onlineState="Unknown",this.z_=new Set}}async function vT(e,t){const n=j(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.W_()&&t.G_()&&(r=2):(i=new yT,r=t.G_()?0:1);try{switch(r){case 0:i.K_=await n.onListen(s,!0);break;case 1:i.K_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=fl(o,`Initialization of query '${yn(t.query)}' failed`);return void t.onError(a)}n.queries.set(s,i),i.U_.push(t),t.j_(n.onlineState),i.K_&&t.H_(i.K_)&&dl(n)}async function TT(e,t){const n=j(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const o=i.U_.indexOf(t);o>=0&&(i.U_.splice(o,1),i.U_.length===0?s=t.G_()?0:1:!i.W_()&&t.G_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function IT(e,t){const n=j(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.U_)a.H_(s)&&(r=!0);o.K_=s}}r&&dl(n)}function wT(e,t,n){const r=j(e),s=r.queries.get(t);if(s)for(const i of s.U_)i.onError(n);r.queries.delete(t)}function dl(e){e.z_.forEach(t=>{t.next()})}var sa,ru;(ru=sa||(sa={})).J_="default",ru.Cache="cache";class AT{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Ln(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=Ln.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==sa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(t){this.key=t}}class vd{constructor(t){this.key=t}}class RT{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=G(),this.mutatedKeys=G(),this.Ia=Bf(t),this.Ta=new Cn(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new nu,s=n?n.Ta:this.Ta;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,f)=>{const p=s.get(u),g=Oi(this.query,f)?f:null,D=!!p&&this.mutatedKeys.has(p.key),P=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let V=!1;p&&g?p.data.isEqual(g.data)?D!==P&&(r.track({type:3,doc:g}),V=!0):this.Ra(p,g)||(r.track({type:2,doc:g}),V=!0,(l&&this.Ia(g,l)>0||c&&this.Ia(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),V=!0):p&&!g&&(r.track({type:1,doc:p}),V=!0,(l||c)&&(a=!0)),V&&(g?(o=o.add(g),i=P?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Ta:o,Aa:r,Zi:a,mutatedKeys:i}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((u,f)=>function(g,D){const P=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return k()}};return P(g)-P(D)}(u.type,f.type)||this.Ia(u.doc,f.doc)),this.Va(r),s=s!=null&&s;const a=n&&!s?this.ma():[],l=this.Pa.size===0&&this.current&&!s?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new Ln(this.query,t.Ta,i,o,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new nu,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=G(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new vd(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new Ed(r))}),n}pa(t){this.la=t.ls,this.Pa=G();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return Ln.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class ST{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class PT{constructor(t){this.key=t,this.wa=!1}}class CT{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new zn(a=>Uf(a),Ni),this.Da=new Map,this.Ca=new Set,this.va=new ht(O.comparator),this.Fa=new Map,this.Ma=new sl,this.xa={},this.Oa=new Map,this.Na=kn.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function bT(e,t,n=!0){const r=Sd(e);let s;const i=r.ba.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ya()):s=await Td(r,t,n,!0),s}async function VT(e,t){const n=Sd(e);await Td(n,t,!0,!1)}async function Td(e,t,n,r){const s=await Qv(e.localStore,me(t)),i=s.targetId,o=n?e.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await DT(e,t,i,o==="current",s.resumeToken)),e.isPrimaryClient&&n&&dd(e.remoteStore,s),a}async function DT(e,t,n,r,s){e.Ba=(f,p,g)=>async function(P,V,$,W){let q=V.view.da($);q.Zi&&(q=await Jc(P.localStore,V.query,!1).then(({documents:jt})=>V.view.da(jt,q)));const et=W&&W.targetChanges.get(V.targetId),It=W&&W.targetMismatches.get(V.targetId)!=null,z=V.view.applyChanges(q,P.isPrimaryClient,et,It);return iu(P,V.targetId,z.fa),z.snapshot}(e,f,p,g);const i=await Jc(e.localStore,t,!0),o=new RT(t,i.ls),a=o.da(i.documents),l=Zr.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);iu(e,n,c.fa);const u=new ST(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function xT(e,t,n){const r=j(e),s=r.ba.get(t),i=r.Da.get(s.targetId);if(i.length>1)return r.Da.set(s.targetId,i.filter(o=>!Ni(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ra(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&al(r.remoteStore,s.targetId),ia(r,s.targetId)}).catch(Xr)):(ia(r,s.targetId),await ra(r.localStore,s.targetId,!0))}async function NT(e,t){const n=j(e),r=n.ba.get(t),s=n.Da.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),al(n.remoteStore,r.targetId))}async function OT(e,t,n){const r=jT(e);try{const s=await function(o,a){const l=j(o),c=mt.now(),u=a.reduce((g,D)=>g.add(D.key),G());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let D=Se(),P=G();return l.ss.getEntries(g,u).next(V=>{D=V,D.forEach(($,W)=>{W.isValidDocument()||(P=P.add($))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,D)).next(V=>{f=V;const $=[];for(const W of a){const q=tv(W,f.get(W.key).overlayedDocument);q!=null&&$.push(new dn(W.key,q,Df(q.value.mapValue),we.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,$,a)}).next(V=>{p=V;const $=V.applyToLocalDocumentSet(f,P);return l.documentOverlayCache.saveOverlays(g,V.batchId,$)})}).then(()=>({batchId:p.batchId,changes:$f(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new ht(J)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,s.batchId,n),await es(r,s.changes),await Bi(r.remoteStore)}catch(s){const i=fl(s,"Failed to persist write");n.reject(i)}}async function Id(e,t){const n=j(e);try{const r=await Kv(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.Fa.get(i);o&&(st(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.wa=!0:s.modifiedDocuments.size>0?st(o.wa):s.removedDocuments.size>0&&(st(o.wa),o.wa=!1))}),await es(n,r,t)}catch(r){await Xr(r)}}function su(e,t,n){const r=j(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ba.forEach((i,o)=>{const a=o.view.j_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=j(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.U_)p.j_(a)&&(c=!0)}),c&&dl(l)}(r.eventManager,t),s.length&&r.Sa.l_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function MT(e,t,n){const r=j(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Fa.get(t),i=s&&s.key;if(i){let o=new ht(O.comparator);o=o.insert(i,xt.newNoDocument(i,B.min()));const a=G().add(i),l=new Li(B.min(),new Map,new ht(J),o,a);await Id(r,l),r.va=r.va.remove(i),r.Fa.delete(t),pl(r)}else await ra(r.localStore,t,!1).then(()=>ia(r,t,n)).catch(Xr)}async function kT(e,t){const n=j(e),r=t.batch.batchId;try{const s=await zv(n.localStore,t);Ad(n,r,null),wd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await es(n,s)}catch(s){await Xr(s)}}async function LT(e,t,n){const r=j(e);try{const s=await function(o,a){const l=j(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(st(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,t);Ad(r,t,n),wd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await es(r,s)}catch(s){await Xr(s)}}function wd(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function Ad(e,t,n){const r=j(e);let s=r.xa[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.xa[r.currentUser.toKey()]=s}}function ia(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Rr(t).forEach(r=>{e.Ma.containsKey(r)||Rd(e,r)})}function Rd(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(al(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),pl(e))}function iu(e,t,n){for(const r of n)r instanceof Ed?(e.Ma.addReference(r.key,t),FT(e,r)):r instanceof vd?(b("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Rd(e,r.key)):k()}function FT(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(b("SyncEngine","New document in limbo: "+n),e.Ca.add(r),pl(e))}function pl(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new O(lt.fromString(t)),r=e.Na.next();e.Fa.set(r,new PT(n)),e.va=e.va.insert(n,r),dd(e.remoteStore,new xe(me(Ff(n.path)),r,"TargetPurposeLimboResolution",Qa.oe))}}async function es(e,t,n){const r=j(e),s=[],i=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,t,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=ol.Qi(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.Sa.l_(s),await async function(l,c){const u=j(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>E.forEach(c,p=>E.forEach(p.ki,g=>u.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>E.forEach(p.qi,g=>u.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Yr(f))throw f;b("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=u.ts.get(p),D=g.snapshotVersion,P=g.withLastLimboFreeSnapshotVersion(D);u.ts=u.ts.insert(p,P)}}}(r.localStore,i))}async function UT(e,t){const n=j(e);if(!n.currentUser.isEqual(t)){b("SyncEngine","User change. New user:",t.toKey());const r=await cd(n.localStore,t);n.currentUser=t,function(i,o){i.Oa.forEach(a=>{a.forEach(l=>{l.reject(new N(v.CANCELLED,o))})}),i.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await es(n,r._s)}}function BT(e,t){const n=j(e),r=n.Fa.get(t);if(r&&r.wa)return G().add(r.key);{let s=G();const i=n.Da.get(t);if(!i)return s;for(const o of i){const a=n.ba.get(o);s=s.unionWith(a.view.Ea)}return s}}function Sd(e){const t=j(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Id.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=BT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=MT.bind(null,t),t.Sa.l_=IT.bind(null,t.eventManager),t.Sa.ka=wT.bind(null,t.eventManager),t}function jT(e){const t=j(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=LT.bind(null,t),t}class ou{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Fi(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return Hv(this.persistence,new $v,t.initialUser,this.serializer)}createPersistence(t){return new Uv(il.jr,this.serializer)}createSharedClientState(t){return new Yv}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class $T{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>su(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UT.bind(null,this.syncEngine),await _T(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ET}()}createDatastore(t){const n=Fi(t.databaseInfo.databaseId),r=function(i){return new eT(i)}(t.databaseInfo);return function(i,o,a,l){return new sT(i,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new oT(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>su(this.syncEngine,n,0),function(){return tu.D()?new tu:new Jv}())}createSyncEngine(t,n){return function(s,i,o,a,l,c,u){const f=new CT(s,i,o,a,l,c);return u&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const s=j(r);b("RemoteStore","RemoteStore shutting down."),s.M_.add(5),await ts(s),s.O_.shutdown(),s.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Re("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Dt.UNAUTHENTICATED,this.clientId=Cf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{b("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(b("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new N(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Le;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=fl(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function mo(e,t){e.asyncQueue.verifyOperationInProgress(),b("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await cd(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function au(e,t){e.asyncQueue.verifyOperationInProgress();const n=await KT(e);b("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>eu(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>eu(t.remoteStore,s)),e._onlineComponents=t}function zT(e){return e.name==="FirebaseError"?e.code===v.FAILED_PRECONDITION||e.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function KT(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){b("FirestoreClient","Using user provided OfflineComponentProvider");try{await mo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!zT(n))throw n;xn("Error using user provided cache. Falling back to memory cache: "+n),await mo(e,new ou)}}else b("FirestoreClient","Using default OfflineComponentProvider"),await mo(e,new ou);return e._offlineComponents}async function Pd(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(b("FirestoreClient","Using user provided OnlineComponentProvider"),await au(e,e._uninitializedComponentsProvider._online)):(b("FirestoreClient","Using default OnlineComponentProvider"),await au(e,new $T))),e._onlineComponents}function GT(e){return Pd(e).then(t=>t.syncEngine)}async function WT(e){const t=await Pd(e),n=t.eventManager;return n.onListen=bT.bind(null,t.syncEngine),n.onUnlisten=xT.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=VT.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=NT.bind(null,t.syncEngine),n}function QT(e,t,n={}){const r=new Le;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new qT({next:p=>{o.enqueueAndForget(()=>TT(i,f)),p.fromCache&&l.source==="server"?c.reject(new N(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new AT(a,u,{includeMetadataChanges:!0,ra:!0});return vT(i,f)}(await WT(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(e,t,n){if(!n)throw new N(v.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function XT(e,t,n,r){if(t===!0&&r===!0)throw new N(v.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function cu(e){if(!O.isDocumentKey(e))throw new N(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function uu(e){if(O.isDocumentKey(e))throw new N(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function gl(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":k()}function ei(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new N(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gl(e);throw new N(v.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new N(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new N(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}XT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cd((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new N(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new N(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new N(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ji{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new N(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new N(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hu(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cE;switch(r.type){case"firstParty":return new dE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new N(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=lu.get(n);r&&(b("ComponentProvider","Removing Datastore"),lu.delete(n),r.terminate())}(this),Promise.resolve()}}function YT(e,t,n,r={}){var s;const i=(e=ei(e,ji))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&xn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Dt.MOCK_USER;else{a=km(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new N(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Dt(c)}e._authCredentials=new uE(new Pf(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new $i(this.firestore,t,this._query)}}class se{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fe(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new se(this.firestore,t,this._key)}}class Fe extends $i{constructor(t,n,r){super(t,n,Ff(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new se(this.firestore,null,new O(t))}withConverter(t){return new Fe(this.firestore,t,this._path)}}function fu(e,t,...n){if(e=Rr(e),bd("collection","path",t),e instanceof ji){const r=lt.fromString(t,...n);return uu(r),new Fe(e,null,r)}{if(!(e instanceof se||e instanceof Fe))throw new N(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(lt.fromString(t,...n));return uu(r),new Fe(e.firestore,null,r)}}function JT(e,t,...n){if(e=Rr(e),arguments.length===1&&(t=Cf.newId()),bd("doc","path",t),e instanceof ji){const r=lt.fromString(t,...n);return cu(r),new se(e,null,new O(r))}{if(!(e instanceof se||e instanceof Fe))throw new N(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(lt.fromString(t,...n));return cu(r),new se(e.firestore,e instanceof Fe?e.converter:null,new O(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new hd(this,"async_queue_retry"),this.hu=()=>{const n=go();n&&b("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};const t=go();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=go();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Le;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(t){if(!Yr(t))throw t;b("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Re("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const s=hl.createAndSchedule(this,t,n,r,i=>this.Eu(i));return this._u.push(s),s}Pu(){this.au&&k()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class ml extends ji{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new ZT}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Dd(this),this._firestoreClient.terminate()}}function tI(e,t){const n=typeof e=="object"?e:q_(),r=typeof e=="string"?e:"(default)",s=U_(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Om("firestore");i&&YT(s,...i)}return s}function Vd(e){return e._firestoreClient||Dd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Dd(e){var t,n,r;const s=e._freezeSettings(),i=function(a,l,c,u){return new SE(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Cd(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new HT(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Fn(kt.fromBase64String(t))}catch(n){throw new N(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Fn(kt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new N(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new N(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new N(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return J(this._lat,t._lat)||J(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=/^__.*__$/;class nI{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new dn(t,this.data,this.fieldMask,n,this.fieldTransforms):new Jr(t,this.data,n,this.fieldTransforms)}}function Nd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw k()}}class El{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new El(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.gu({path:r,yu:!1});return s.wu(t),s}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.gu({path:r,yu:!1});return s.mu(),s}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return ni(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(Nd(this.fu)&&eI.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class rI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Fi(t)}Fu(t,n,r,s=!1){return new El({fu:t,methodName:n,vu:r,path:St.emptyPath(),yu:!1,Cu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sI(e){const t=e._freezeSettings(),n=Fi(e._databaseId);return new rI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function iI(e,t,n,r,s,i={}){const o=e.Fu(i.merge||i.mergeFields?2:0,t,n,s);Ld("Data must be an object, but it was:",o,r);const a=Md(r,o);let l,c;if(i.merge)l=new ne(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const p=oI(t,f,n);if(!o.contains(p))throw new N(v.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);lI(u,p)||u.push(p)}l=new ne(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new nI(new Qt(a),l,c)}function Od(e,t){if(kd(e=Rr(e)))return Ld("Unsupported field value:",t,e),Md(e,t);if(e instanceof xd)return function(r,s){if(!Nd(s.fu))throw s.Du(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Du(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Od(a,s.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=Rr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=mt.fromDate(r);return{timestampValue:Zs(s.serializer,i)}}if(r instanceof mt){const i=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zs(s.serializer,i)}}if(r instanceof yl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fn)return{bytesValue:nd(s.serializer,r._byteString)};if(r instanceof se){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rl(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Du(`Unsupported field value: ${gl(r)}`)}(e,t)}function Md(e,t){const n={};return bf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Hn(e,(r,s)=>{const i=Od(s,t.pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function kd(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof mt||e instanceof yl||e instanceof Fn||e instanceof se||e instanceof xd)}function Ld(e,t,n){if(!kd(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=gl(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function oI(e,t,n){if((t=Rr(t))instanceof _l)return t._internalPath;if(typeof t=="string")return Fd(e,t);throw ni("Field path arguments must be of type string or ",e,!1,void 0,n)}const aI=new RegExp("[~\\*/\\[\\]]");function Fd(e,t,n){if(t.search(aI)>=0)throw ni(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new _l(...t.split("."))._internalPath}catch{throw ni(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ni(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new N(v.INVALID_ARGUMENT,a+e+l)}function lI(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new cI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Bd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cI extends Ud{data(){return super.data()}}function Bd(e,t){return typeof t=="string"?Fd(e,t):t instanceof _l?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new N(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hI{convertValue(t,n="none"){switch(un(t)){case 0:return null;case 1:return t.booleanValue;case 2:return pt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(cn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw k()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Hn(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new yl(pt(t.latitude),pt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Ya(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lr(t));default:return null}}convertTimestamp(t){const n=je(t);return new mt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=lt.fromString(t);st(ld(r));const s=new Fr(r.get(1),r.get(3)),i=new O(r.popFirst(5));return s.isEqual(n)||Re(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(e,t,n){let r;return r=e?e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class dI extends Ud{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new xs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Bd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xs extends dI{data(t={}){return super.data(t)}}class pI{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ts(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new xs(this._firestore,this._userDataWriter,r.key,r,new Ts(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new N(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new xs(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ts(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new xs(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ts(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:gI(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function gI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return k()}}class mI extends hI{constructor(t){super(),this.firestore=t}convertBytes(t){return new Fn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new se(this.firestore,null,n)}}function _I(e){e=ei(e,$i);const t=ei(e.firestore,ml),n=Vd(t),r=new mI(t);return uI(e._query),QT(n,e._query).then(s=>new pI(t,r,e,s))}function yI(e,t){const n=ei(e.firestore,ml),r=JT(e),s=fI(e.converter,t);return EI(n,[iI(sI(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,we.exists(!1))]).then(()=>r)}function EI(e,t){return function(r,s){const i=new Le;return r.asyncQueue.enqueueAndForget(async()=>OT(await GT(r),s,i)),i.promise}(Vd(e),t)}(function(t,n=!0){(function(s){qn=s})($_),js(new Sr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ml(new hE(r.getProvider("auth-internal")),new gE(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new N(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fr(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Rn(xc,"4.6.1",t),Rn(xc,"4.6.1","esm2017")})();const vI={apiKey:"AIzaSyBJtd3jZuxDBMWqjVG-dLHzgZ5lWQCtydY",authDomain:"bsit202-f8a5d.firebaseapp.com",databaseURL:"https://bsit202-f8a5d-default-rtdb.firebaseio.com",projectId:"bsit202-f8a5d",storageBucket:"bsit202-f8a5d.appspot.com",messagingSenderId:"242055639378",appId:"1:242055639378:web:d3b5c4edf2e475c4524a8b",measurementId:"G-FY9DZFDKLH"},TI=Th(vI),du=tI(TI),ns=e=>(kp("data-v-f84caabb"),e=e(),Lp(),e),II={class:"chat-page-body FLEX-CENTER"},wI={class:"chat-box PADDING-2 FLEX-COLUMN"},AI=ns(()=>At("div",{class:"logo-area FLEX-CENTER"},[At("img",{src:fh})],-1)),RI=ns(()=>At("p",{class:"welcome"},"Welcome to chat",-1)),SI={class:"chats FLEX-COLUMN"},PI=ns(()=>At("div",{class:"userchat"},[At("p",{class:"username"},"Unknown"),At("p",{class:"chat"}," Hello guys welcome back to my youtube channel i hope you enjoy my videos ")],-1)),CI=ns(()=>At("p",{class:"chat chat-y"},"hello",-1)),bI={class:"username"},VI={class:"chat"},DI=ns(()=>At("button",{class:"submit P-SMALL",type:"submit"},"Send",-1)),xI={__name:"ChatPage",setup(e){const t=Os([]),n=async()=>{t.value=[],(await _I(fu(du,"chats"))).forEach(o=>{t.value.push(o.data())})};Wu(n());const r=Os({username:"unknown",chat:""}),s=async()=>{await yI(fu(du,"chats"),r.value).then(i=>console.log(i)),n()};return(i,o)=>(fr(),dr("body",II,[At("div",wI,[AI,RI,At("div",SI,[PI,CI,(fr(!0),dr(te,null,og(t.value,(a,l)=>(fr(),dr("div",{class:"userchat",key:l},[At("p",bI,bl(a.username),1),At("p",VI,bl(a.chat),1)]))),128))]),At("form",{class:"form-area FLEX-CENTER",onSubmit:pm(s,["prevent"])},[wo(At("input",{type:"text",placeholder:"chat","onUpdate:modelValue":o[0]||(o[0]=a=>r.value.chat=a)},null,512),[[hm,r.value.chat]]),DI],32)])]))}},NI=dh(xI,[["__scopeId","data-v-f84caabb"]]),OI={__name:"App",setup(e){const t=Os(!0),n=Os(!1),r=()=>{t.value=!1,n.value=!0};return(s,i)=>(fr(),dr(te,null,[wo(ge(Am,{onHandleClick:r},null,512),[[Jl,t.value]]),wo(ge(NI,null,null,512),[[Jl,n.value]])],64))}};_m(OI).mount("#app");
